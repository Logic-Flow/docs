(function(){var e={4061:function(e,t,s){"use strict";var o=s(3147),a=s(486),i=s(3368),n=s.n(i),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"organizer-panel-wrapper"},[t("el-container",{staticClass:"organizer-container"},[t("logic-panel",{staticClass:"logic-panel-wrapper",attrs:{context:e.context,info:e.info}})],1)],1)])},l=[];s(9375);class d{constructor(e){this.options=Object.assign({limit:10,onChange:()=>{}},e||{}),this._stacks=[],this._pointer=-1}get current(){return this._stacks[this._pointer]}get canUndo(){return this._pointer>0}get canRedo(){return this._pointer<this._stacks.length-1}get count(){return this._stacks.length}get stacks(){return this._stacks}add(e){if(this._stacks)return this._stacks.splice(this._pointer+1,this._stacks.length-this._pointer-1),this._stacks.length===this.options.limit?(this._stacks.shift(),this._pointer=this.options.limit-1):this._pointer++,this._stacks.push(e),this.options.onChange(this),this.current}undo(){if(this.canUndo)return this._pointer--,this.options.onChange(this),this.current}redo(){if(this.canRedo)return this._pointer++,this.options.onChange(this),this.current}destroy(){this._stacks=null,this.options=null,this._pointer=null}}const c="*";class p{constructor(){this._events={}}on(e,t,s){const o=e.split(",");return o.forEach((e=>{this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!s})})),this}once(e,t){return this.on(e,t,!0)}emit(e,t){const s=this._events[e]||[],o=this._events[c]||[],a=s=>{let{length:o}=s;for(let a=0;a<o;a++){if(!s[a])continue;const{callback:i,once:n}=s[a];n&&(s.splice(a,1),0===s.length&&delete this._events[e],o--,a--),i.apply(this,[t])}};a(s),a(o)}off(e,t){if(e)if(t){const s=this._events[e]||[];let{length:o}=s;for(let e=0;e<o;e++)s[e].callback===t&&(s.splice(e,1),o--,e--);0===s.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this}getEvents(){return this._events}}class h{constructor(e){this.eventCenter=new p,this.history=new d,this.logicList=e.logicList}}var u=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"logic-panel",attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 1)"}},[t("div",{ref:"container",staticClass:"logic-container"}),t("toolbar",{attrs:{lf:e.lf,graph:e.graph}}),e.lf?t("property-panel",{attrs:{lf:e.lf,context:e.context},on:{submit:e.handleSubmit}}):e._e()],1)},m=[],g=s(2759),v=s.n(g),y=s(2332),f=s(6058),b=(s(539),function(){var e=this,t=e._self._c;return t("el-drawer",{staticClass:"properties-panel",staticStyle:{position:"absolute"},attrs:{modal:!1,"append-to-body":!1,wrapperClosable:!0,"destroy-on-close":!0,direction:"rtl",width:"100%",size:500,visible:e.showDrawer},on:{closeDrawer:e.closeDrawer,"update:visible":function(t){e.showDrawer=t}}},["condition"!==e.panelType?t("div",[t("div",{staticClass:"setter-title"},[e._v("设置名称")]),t("name-setter",{on:{change:e.handelNameChange},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1):e._e(),"action"===e.panelType?t("div",[t("div",{staticClass:"setter-title"},[e._v("设置行为")]),t("action-setter",{attrs:{context:e.context,current:e.currentModel,lf:e.lf},model:{value:e.actions,callback:function(t){e.actions=t},expression:"actions"}})],1):e._e(),"condition"===e.panelType?t("div",[t("div",{staticClass:"setter-title"},[e._v("设置条件")]),t("condition-setter",{ref:"edgeProperties",attrs:{context:e.context,lf:e.lf},model:{value:e.condition,callback:function(t){e.condition=t},expression:"condition"}})],1):e._e(),"event"===e.panelType?t("div",[t("div",{staticClass:"setter-title"},[e._v("设置事件")]),t("event-setter",{attrs:{context:e.context,current:e.currentModel,lf:e.lf},model:{value:e.event,callback:function(t){e.event=t},expression:"event"}})],1):e._e(),"ds"===e.panelType?t("div",[t("div",{staticClass:"setter-title"},[e._v("设置请求")]),t("ds-setter",{attrs:{context:e.context,current:e.currentModel,lf:e.lf},model:{value:e.ds,callback:function(t){e.ds=t},expression:"ds"}})],1):e._e(),"pageJump"===e.panelType?t("div",[t("div",{staticClass:"setter-title"},[e._v("设置跳转")]),t("page-jump-setter",{attrs:{lf:e.lf,context:e.context,current:e.currentModel},model:{value:e.pageJump,callback:function(t){e.pageJump=t},expression:"pageJump"}})],1):e._e(),"dc"===e.panelType?t("div",[t("div",{staticClass:"setter-title"},[e._v("数据转换")]),t("dc-setter",{attrs:{lf:e.lf,context:e.context,current:e.currentModel},model:{value:e.dc,callback:function(t){e.dc=t},expression:"dc"}})],1):e._e()])}),x=[],C=s(8269),_=s(7740),N=s(4257),w=s(8008);const k=new Set(["eval","setTimeout","setInterval","fetch","Image","XMLHttpRequest","ActiveXObject"]);function P(e){return!("Identifier"!==e.type||!k.has(e.name))}function M(e){const t=N.parse(e);console.log("ast ---\x3e>>",t);let s=!1,o=!1,a=!1;if(w.bQ(t,{MemberExpression(e){"window"===e.object.name?s=!0:"document"===e.object.name&&(o=!0)},CallExpression(e){if(P(e.callee))throw new Error(`存在不允许的 API 调用：${e.callee.name}，请修改`)},ReturnStatement(e){a=!0}}),s||o)throw new Error("不能使用 window 或 document 关键字");if(!a)throw new Error("要求转换函数体必须包含 return 语句");return a}var I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"action-panel-wrapper"},[e._l(e.actions,(function(s,o){return t("action-item",{key:o,staticClass:"action-item",attrs:{title:`行为${o+1}`,value:s,context:e.context,current:e.current,lf:e.lf},on:{change:function(t){return e.handleActionChange(t,o)},delete:function(t){return e.handleActionDelete(o)}}})})),t("el-link",{staticClass:"add-button",attrs:{type:"primary",underline:!1},on:{click:e.addAction}},[t("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 添加行为 ")])],2)},O=[],T=function(){var e=this,t=e._self._c;return t("div",{staticClass:"action-item-wrap"},[t("div",{staticClass:"header"},[e._v(" "+e._s(e.title)+" "),t("span",{staticClass:"delete",staticStyle:{cursor:"pointer"},on:{click:e.handleDelete}},[t("i",{staticClass:"el-icon-delete"}),e._v(" 删除 ")])]),t("el-row",[t("el-col",{attrs:{span:10}},[t("div",{staticClass:"action-label"},[e._v("属性:")]),t("el-select",{staticClass:"use-property",attrs:{value:e.propName,size:"small",placeholder:"请选择属性"},on:{change:e.handlePropChange}},e._l(e.propOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,size:"small",value:e.value}})})),1)],1),t("el-col",{attrs:{span:14}},[t("div",{staticClass:"action-label",staticStyle:{"margin-left":"30px"}},[e._v("设置为:")]),t("value-collector",{staticClass:"value-select",attrs:{value:e.val,options:e.valueOptions,context:e.context,lf:e.lf,types:e.types},on:{change:e.handleValueChange}})],1)],1)],1)},E=[],S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"value-selector-wrapper"},[t("el-dropdown",{staticClass:"type-dropdown",attrs:{trigger:"click",size:"small",placement:"top"},on:{command:e.handleCommand}},[t("span",{staticClass:"value-selector-prefix"},[t("i",{staticClass:"value-selector-icon",class:["value-selector-icon",e.typeMap[e.type]&&e.typeMap[e.type].icon]})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.typeOptions,(function(s){return t("el-dropdown-item",{key:s.value,class:s.value===e.type&&"selected",attrs:{command:s.value,icon:s.icon}},[e._v(" "+e._s(s.label)+" ")])})),1)],1),t("div",{staticClass:"value-selector"},[t("option-value",{directives:[{name:"show",rawName:"v-show",value:"option"===e.type,expression:"type === 'option'"}],attrs:{value:e.val,options:e.options},on:{change:e.handleChange}}),t("input-value",{directives:[{name:"show",rawName:"v-show",value:"input"===e.type,expression:"type === 'input'"}],attrs:{value:e.val},on:{change:e.handleChange}}),t("component-value",{directives:[{name:"show",rawName:"v-show",value:"component"===e.type,expression:"type === 'component'"}],attrs:{value:e.val,context:e.context},on:{change:e.handleChange}}),t("component-prop-value",{directives:[{name:"show",rawName:"v-show",value:"componentProp"===e.type,expression:"type === 'componentProp'"}],attrs:{value:e.val,context:e.context},on:{change:e.handleChange}}),t("data-source-value",{directives:[{name:"show",rawName:"v-show",value:"dataSource"===e.type,expression:"type === 'dataSource'"}],attrs:{value:e.val,context:e.context,lf:e.lf},on:{change:e.handleChange}}),t("data-convert-value",{directives:[{name:"show",rawName:"v-show",value:"dataConvert"===e.type,expression:"type === 'dataConvert'"}],attrs:{value:e.val,context:e.context,lf:e.lf},on:{change:e.handleChange}}),t("url-param-value",{directives:[{name:"show",rawName:"v-show",value:"urlParam"===e.type,expression:"type === 'urlParam'"}],attrs:{value:e.val},on:{change:e.handleChange}}),t("init-param-value",{directives:[{name:"show",rawName:"v-show",value:"initParam"===e.type,expression:"type === 'initParam'"}],attrs:{value:e.val},on:{change:e.handleChange}})],1)],1)},L=[],D=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{staticClass:"use-property",attrs:{filterable:"",size:"small",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,size:"small",value:e.value}})})),1)],1)},j=[],A={props:{context:Object,options:{type:Array,default:()=>[]},value:Object},data(){return{val:""}},watch:{value:{immediate:!0,deep:!0,handler(e){e&&"option"===e.type&&(this.val=e.value)}}},methods:{handleChange(e){this.val=e;const t=this.options.find((t=>t.value===e))||{},s={type:"option",value:e,dataType:t.dataType,valueDesc:t.label};this.$emit("change",s)}}},z=A,$=s(2401),V=(0,$.A)(z,D,j,!1,null,null,null),R=V.exports,q=function(){var e=this,t=e._self._c;return t("div",[t("el-input",{staticClass:"input",attrs:{placeholder:"请输入值",size:"small",type:"textarea",rows:1},on:{change:e.handleChange},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}),t("el-select",{attrs:{size:"small",placeholder:"请选择数据类型",filterable:""},on:{change:e.handleTypeChange},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},e._l(e.TypeOptions,(function(s){return t("el-option",{key:s.value,attrs:{label:s.label,size:"small",value:s.value}},[t("span",{staticStyle:{float:"left"}},[e._v(" "+e._s(s.label)+" ")])])})),1)],1)},B=[];const H=[{value:"string",label:"string"},{value:"number",label:"number"},{value:"boolean",label:"boolean"},{value:"undefined",label:"undefined"},{value:"null",label:"null"},{value:"object",label:"object"},{value:"array[string]",label:"array[string]"},{value:"array[number]",label:"array[number]"}];var U={props:{context:Object,value:Object},data(){return{val:"",dataType:"string",TypeOptions:H}},watch:{value:{immediate:!0,deep:!0,handler(e){e&&"input"===e.type&&(this.val=e.value,this.dataType=e.dataType)}}},methods:{handleTypeChange(e){this.dataType=e;const t={type:"input",value:this.val,dataType:this.dataType||"string"};this.$emit("change",t)},handleChange(e){this.val=e;const t={type:"input",value:e,dataType:this.dataType||"string"};this.$emit("change",t)}}},F=U,G=(0,$.A)(F,q,B,!1,null,"6a96ffc7",null),J=G.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{attrs:{size:"small",placeholder:"请选择页面组件",filterable:""},on:{change:e.handleChange},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},e._l(e.options,(function(s){return t("el-option",{key:s.value,attrs:{label:s.label,size:"small",value:s.value},nativeOn:{mouseenter:function(t){return e.handleMouseEnter(s.value)}}},[t("span",{staticStyle:{float:"left"}},[t("b",[e._v(e._s(s.name))]),e._v("的"+e._s(s.desc)+" ")])])})),1),t("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showFieldInput,expression:"showFieldInput"}],staticClass:"field-input",attrs:{placeholder:"请输入字段名",size:"small"},on:{change:e.handleFieldChange},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1)},Y=[];const X=160,W=80,Z=60,Q=100,ee=100,te=100,se=28,oe=24,ae={ONLOAD:"onload",ERROR:"error",RESET:"reset",PREVIEW:"preview",CANVAS_MODEL_ACTIVATED:"canvas:model-activated",CANVAS_MODEL_DELETED:"canvas:model-deleted",CANVAS_MODEL_HOVERED:"canvas:model-hovered",CANVAS_MODEL_CLICKED:"canvas:model-clicked",LOGIC_NODE_ADD:"logic:node-add",LOGIC_NODE_HOVER:"logic:node-hover",LOGIC_NODE_DYN_DATA:"logic:node-dyn-data",LOGIC_HISTORY_CHANGE:"logic:history-change"},ie=e=>e.getModelName()||e.name||e.componentName,ne=function(e,t,s){e.selectElementById(t);const o=e.getElement(t),a=e.rootEl.getBoundingClientRect(),i=s||0;e.transformModel.focusOn(o.x+i,o.y,Number(a.width),Number(a.height))};var re={props:{context:Object,value:Object},data(){return{val:"",fieldName:"",showFieldInput:!1}},watch:{value:{immediate:!0,deep:!0,handler(e){e&&"component"===e.type&&(this.val=e.componentId,this.fieldName=e.field)}},val:{immediate:!0,handler(e){const t=this.getInputModelList(),s=t.find((t=>t.id===e));if(s&&s.getLogic){const e=s.getLogic(),t=e.props&&e.props.length&&e.props.find((e=>"value"===e.name));this.showFieldInput=t&&"object"===t.propType}}}},methods:{handleMouseEnter(e){const t=modelList.find((t=>t.id===e));this.context.eventCenter.emit(ae.LOGIC_NODE_HOVER,t)},handleChange(e){this.val=e;const t={type:"component",prop:"value",field:this.fieldName,componentId:this.val,componentName:this.selectModel&&this.selectModel.getModelName(),propName:"值",dataType:this.valueProp.propType};this.$emit("change",t)},handleFieldChange(){const e={type:"component",prop:"value",field:this.fieldName,componentId:this.val,componentName:this.selectModel&&this.selectModel.getModelName(),propName:"值",dataType:this.valueProp.propType};this.$emit("change",e)},getInputModelList(){return[]}},computed:{options(){let e=this.getInputModelList();const t=e.map((e=>{const t=e.getLogic(),s=t.props&&t.props.length&&t.props.find((e=>"value"===e.name));return{id:e.id,name:ie(e),value:e.id,desc:s.description,label:`${ie(e)}的${s.description}`}}));return t},valueProp(){if(this.selectModel&&this.selectModel.getLogic){const e=this.selectModel.getLogic(),t=e.props&&e.props.length&&e.props.find((e=>"value"===e.name));return t}return{}},selectModel(){const e=this.getInputModelList(),t=e.find((e=>e.id===this.val));return t}}},le=re,de=(0,$.A)(le,K,Y,!1,null,"34cc6b1e",null),ce=de.exports,pe=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{attrs:{size:"small",placeholder:"请选择数据节点",filterable:""},on:{change:e.handleChange},model:{value:e.nodeId,callback:function(t){e.nodeId=t},expression:"nodeId"}},e._l(e.options,(function(s){return t("el-option",{key:s.value,attrs:{label:s.label,size:"small",value:s.value}},[t("span",{staticStyle:{float:"left"},on:{mouseenter:function(t){return t.stopPropagation(),e.handleMouseEnter(s.value)}}},[e._v(" "+e._s(s.label)+" ")])])})),1),e.nodeId?t("div",[e.apiId?t("field-selector",{staticClass:"field-selector",attrs:{body:e.resBody,value:e.field},on:{change:e.handleFiledChange}}):t("div",{staticClass:"custom-field"},[t("el-input",{staticClass:"custom-input",attrs:{size:"small",placeholder:"支持以.分割的多级属性"},on:{change:e.handleCustomField},model:{value:e.field,callback:function(t){e.field=t},expression:"field"}})],1)],1):e._e()],1)},he=[],ue=function(){var e=this,t=e._self._c;return t("div",[t("el-cascader",{ref:"fieldSelector",attrs:{size:"small",placeholder:"请选择字段",options:e.options,props:{expandTrigger:"click",checkStrictly:!0}},on:{change:e.handleChange},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})],1)},me=[],ge={props:{body:Object,value:String},data(){return{val:""}},watch:{value:{immediate:!0,deep:!0,handler(e){this.val=this.value&&this.value.split(".")||[]}}},computed:{options(){const e=[],t=(e,s)=>{if(e.properties)for(let o in e.properties){const a={label:o,value:o,dataType:e.properties[o].type};s.push(a),e.properties[o].properties&&(a.children=[],t(e.properties[o],a.children))}};return t(this.body,e),e}},methods:{handleChange(e){const t=this.$refs["fieldSelector"].getCheckedNodes(),s=t[0].data||{};this.$emit("change",e,s.dataType)}}},ve=ge,ye=(0,$.A)(ve,ue,me,!1,null,"3db2b56f",null),fe=ye.exports,be={props:{context:Object,lf:Object,value:Object},data(){return{nodeId:"",resBody:{},field:"",dataType:"string",TypeOptions:H}},watch:{value:{immediate:!0,deep:!0,handler(e){e&&"dataSource"===e.type&&(this.nodeId=e.nodeId,this.field=e.field)}},apiId:{immediate:!0,deep:!0,async handler(e){}}},methods:{handleMouseEnter(e){ne(this.lf.graphModel,e,240);const t=this.lf.getNodeModelById(e);this.lf.graphModel.eventCenter.emit("node:hover-node",t)},handleChange(e){const t=this.options.find((e=>e.value===this.nodeId));let s="";t&&(s=t.label);const o={type:"dataSource",field:this.field,apiId:this.apiId,apiLabel:s,nodeId:this.nodeId};this.$emit("change",o)},handleFiledChange(e,t){console.log("this.field",this.field);const s=this.options.find((e=>e.value===this.nodeId));let o="";s&&(o=s.label),this.field=e.join(".");const a={type:"dataSource",field:this.field,apiId:this.apiId,nodeId:this.nodeId,apiLabel:o,dataType:t};this.$emit("change",a)},handleCustomField(){const e=this.options.find((e=>e.value===this.nodeId));let t="";e&&(t=e.label);const s={type:"dataSource",field:this.field,apiId:this.apiId,nodeId:this.nodeId,apiLabel:t,dataType:this.dataType};this.$emit("change",s)}},computed:{options(){const e=this.lf.getGraphData(),{nodes:t}=e,s=t.filter((e=>"dataSource"===e.properties.componentName&&e.properties.ds)),o=s.map((e=>({label:`${e.properties.name}_${e.properties.ds.name}`,value:e.id,apiId:"redirect"===e.properties.ds.fetchMode?e.properties.ds.resourceId:e.properties.ds.id,nodeId:e.id})));return o},apiId(){const e=this.options.find((e=>e.value===this.nodeId));return e&&e.apiId}},components:{fieldSelector:fe}},xe=be,Ce=(0,$.A)(xe,pe,he,!1,null,"6e500f11",null),_e=Ce.exports,Ne=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{attrs:{size:"small",placeholder:"请选择数据节点",filterable:""},on:{change:e.handleChange},model:{value:e.nodeId,callback:function(t){e.nodeId=t},expression:"nodeId"}},e._l(e.options,(function(s){return t("el-option",{key:s.value,attrs:{label:s.label,size:"small",value:s.value}},[t("span",{staticStyle:{float:"left"},on:{mouseenter:function(t){return t.stopPropagation(),e.handleMouseEnter(s.value)}}},[e._v(" "+e._s(s.label)+" ")])])})),1)],1)},we=[],ke={props:{context:Object,lf:Object,value:Object},data(){return{nodeId:"",field:"",dataType:"string"}},watch:{value:{immediate:!0,deep:!0,handler(e){console.log("nv ---\x3e>>",e),e&&"dataConvert"===e.type&&(this.nodeId=e.nodeId,this.field=e.field)}}},methods:{handleMouseEnter(e){ne(this.lf.graphModel,e,240);const t=this.lf.getNodeModelById(e);this.lf.graphModel.eventCenter.emit("node:hover-node",t)},handleChange(e){this.options.find((e=>e.value===this.nodeId));const t={type:"dataConvert",nodeId:this.nodeId};this.$emit("change",t)},handleFieldChange(e,t){}},computed:{options(){const e=this.lf.getGraphData();console.log("data ---\x3e>>",e);const{nodes:t}=e,s=t.filter((e=>"dataConvert"===e.properties.componentName&&e.properties.dc)),o=s.map((e=>({label:`${e.properties.name}`,value:e.id,nodeId:e.id})));return console.log("options ===>>>",o),o}}},Pe=ke,Me=(0,$.A)(Pe,Ne,we,!1,null,null,null),Ie=Me.exports,Oe=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{attrs:{size:"small",placeholder:"请选择页面组件",filterable:""},on:{change:e.handleChange},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},e._l(e.options,(function(s){return t("el-option",{key:s.value,attrs:{label:s.label,size:"small",value:s.value},nativeOn:{mouseenter:function(t){return e.handleMouseEnter(s.value)}}},[t("span",{staticStyle:{float:"left"}},[t("b",[e._v(e._s(s.name))])])])})),1),t("el-select",{directives:[{name:"show",rawName:"v-show",value:e.showPropSelet,expression:"showPropSelet"}],staticClass:"prop-select",attrs:{size:"small",placeholder:"请选择属性"},on:{change:e.handlePropChange},model:{value:e.propName,callback:function(t){e.propName=t},expression:"propName"}},e._l(e.propOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,size:"small",value:e.value}})})),1),t("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showFieldInput,expression:"showFieldInput"}],staticClass:"field-input",attrs:{placeholder:"请输入字段名",size:"small"},on:{change:e.handleFieldChange},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1)},Te=[],Ee={props:{context:Object,value:Object},data(){return{val:"",propName:"",fieldName:""}},watch:{value:{immediate:!0,deep:!0,handler(e){e&&"componentProp"===e.type&&(this.val=e.componentId,this.propName=e.prop,this.fieldName=e.field)}}},methods:{handleMouseEnter(e){},handleChange(e){this.val=e;const t={type:"componentProp",prop:this.propName,field:this.fieldName,componentId:this.val,componentName:this.selectModel&&this.selectModel.getModelName(),propName:this.selectedProp&&this.selectedProp.label};this.$emit("change",t)},handlePropChange(){const e={type:"componentProp",prop:this.propName,field:this.fieldName,componentId:this.val,dataType:this.selectedProp.dataType,componentName:this.selectModel&&this.selectModel.getModelName(),propName:this.selectedProp&&this.selectedProp.label};this.$emit("change",e)},handleFieldChange(){const e={type:"componentProp",prop:this.propName,field:this.fieldName,componentId:this.val,dataType:this.selectedProp.dataType,componentName:this.selectModel&&this.selectModel.getModelName(),propName:this.selectedProp&&this.selectedProp.label};this.$emit("change",e)},getLogicModelList(){return[]}},computed:{options(){let e=this.getLogicModelList();const t=e.map((e=>({id:e.id,value:e.id,name:ie(e),label:`${ie(e)}`})));return t},propOptions(){const e=this.getLogicModelList(),t=e.find((e=>e.id===this.val));let s=[];if(t&&t.getLogic){const e=t.getLogic(),o=e.props;s=o.map((e=>({label:e.description,value:e.name,dataType:e.propType})))}return s},showPropSelet(){return!!this.val},showFieldInput(){let e=!1;if(this.selectModel&&this.selectModel.getLogic){const t=this.selectModel.getLogic(),s=t.props||[],o=s.find((e=>e.name===this.propName));o&&"object"===o.propType&&(e=!0)}return e},selectedProp(){return this.propOptions.find((e=>e.value===this.propName))},selectModel(){const e=this.getLogicModelList(),t=e.find((e=>e.id===this.val));return t}}},Se=Ee,Le=(0,$.A)(Se,Oe,Te,!1,null,"eee1412c",null),De=Le.exports,je=function(){var e=this,t=e._self._c;return t("div",[t("el-input",{attrs:{placeholder:"请输入值",size:"small"},on:{change:e.handleChange},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})],1)},Ae=[],ze={props:{context:Object,value:Object},data(){return{val:""}},watch:{value:{immediate:!0,deep:!0,handler(e){e&&"urlParam"===e.type&&(this.val=e.value)}}},methods:{handleChange(e){this.val=e;const t={type:"urlParam",value:e,dataType:"string"};this.$emit("change",t)}}},$e=ze,Ve=(0,$.A)($e,je,Ae,!1,null,null,null),Re=Ve.exports,qe=function(){var e=this,t=e._self._c;return t("div",[t("el-input",{attrs:{placeholder:"请输入值",size:"small"},on:{change:e.handleChange},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})],1)},Be=[],He={props:{context:Object,value:Object},data(){return{val:""}},watch:{value:{immediate:!0,deep:!0,handler(e){e&&"initParam"===e.type&&(this.val=e.value)}}},methods:{handleChange(e){this.val=e;const t={type:"initParam",value:e,dataType:"string"};this.$emit("change",t)}}},Ue=He,Fe=(0,$.A)(Ue,qe,Be,!1,null,null,null),Ge=Fe.exports;const Je={option:{label:"默认选项",value:"option",icon:"el-icon-folder-opened"},input:{label:"手动输入",value:"input",icon:"el-icon-edit-outline"},component:{label:"页面组件值",value:"component",icon:"el-icon-cpu"},componentProp:{label:"页面组件属性值",value:"componentProp",icon:"el-icon-connection"},dataSource:{label:"数据节点返回值",value:"dataSource",icon:"el-icon-receiving"},dataConvert:{label:"转换节点返回值",value:"dataConvert",icon:"el-icon-s-operation"},urlParam:{label:"路由参数属性值",value:"urlParam",icon:"el-icon-link"},initParam:{label:"宿主系统变量属性值",value:"initParam",icon:"el-icon-attract"}},Ke={dataSource:{label:"请求数据",value:"dataSource",logo:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/data_load.png"},pageJump:{label:"页面跳转",value:"pageJump",logo:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/page_jump.png"},dataConvert:{label:"数据转换",value:"dataConvert",logo:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/data_trans.png"}},Ye={pageInit:{label:"页面初始化",value:"pageInit",logo:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/page_init.png"}},Xe={undo:{name:"undo",desc:"返回上一步",icon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/tool_previous.png"},redo:{name:"redo",desc:"恢复下一步",icon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/tool_next.png"},zoomIn:{name:"zoomIn",desc:"画布放大",icon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/tool_zoom_in.png"},zoomOut:{name:"zoomOut",desc:"画布缩小",icon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/tool_zoom_out.png"},fitView:{name:"fitView",desc:"区域适应",icon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/tool_fullscreen.png"},selection:{name:"selection",desc:"框选节点",icon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/tool_selection.png"},beautify:{name:"beautify",desc:"美化布局",icon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/tool_beautify.png"},navigation:{name:"navigation",desc:"全图导航",icon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/tool_location.png"}},We="https://s3-gzpu.didistatic.com/tiyan-base-store/form-editor/pc/icon_anniu@2x.png",Ze=[{value:"GET",label:"GET"},{value:"POST",label:"POST"}];var Qe={props:{context:Object,lf:Object,options:Array,types:Array,value:[String,Number,Boolean,Object,Array]},data(){return{type:"",typeMap:Je,val:null}},watch:{types:{deep:!0,immediate:!0,handler(e){this.type=e&&e[0]||this.type}},value:{deep:!0,immediate:!0,handler(e){e&&e.type&&(this.type=e.type||this.types&&this.types[0],this.val=JSON.parse(JSON.stringify(e)))}}},computed:{typeOptions(){const e=this.types.map((e=>this.typeMap[e]));return e}},methods:{handleChange(e){this.val=e,this.$emit("change",e)},handleCommand(e){this.type=e,this.$emit("change",{type:e,dataType:"string"})}},components:{optionValue:R,inputValue:J,componentValue:ce,componentPropValue:De,dataSourceValue:_e,dataConvertValue:Ie,urlParamValue:Re,initParamValue:Ge}},et=Qe,tt=(0,$.A)(et,S,L,!1,null,"fdf24554",null),st=tt.exports,ot={props:{lf:Object,context:Object,current:Object,value:[String,Number,Boolean,Object,Array],title:String},model:{prop:"value",event:"change"},data(){return{propName:"",val:{}}},watch:{value:{deep:!0,immediate:!0,handler(e){this.propName=e.key,this.val=e.value}}},computed:{propOptions(){const e=this.current.getLogic(),t=e.props.map((e=>({label:e.description,value:e.name})));return t},valueOptions(){const e=this.currentProp&&this.currentProp.optionValue&&this.currentProp.optionValue.map((e=>({label:e.description,value:e.value,dataType:this.currentProp.propType})))||[];return e},types(){return this.valueOptions.length?["option","input","component","componentProp","dataSource","dataConvert","urlParam","initParam"]:["input","component","componentProp","dataSource","dataConvert","urlParam","initParam"]},currentProp(){const e=this.current.getLogic(),t=e.props.find((e=>e.name===this.propName));return t}},methods:{handlePropChange(e){this.propName=e,this.val={},this.$emit("change",{key:this.currentProp.name,keyDefine:this.currentProp.description,keyType:this.currentProp.propType,value:"",valueDefine:""})},handleValueChange(e){this.val=e,this.$emit("change",{key:this.currentProp.name,keyDefine:this.currentProp.description,keyType:this.currentProp.propType,value:e,valueDefine:""})},handleDelete(){this.$emit("delete")}},components:{valueCollector:st}},at=ot,it=(0,$.A)(at,T,E,!1,null,"42e75e45",null),nt=it.exports,rt={props:{lf:Object,context:Object,current:Object,value:[String,Number,Boolean,Object,Array]},model:{prop:"value",event:"change"},data(){return{propName:"",actions:[]}},watch:{value:{deep:!0,immediate:!0,handler(e){e&&e.length?this.actions=e:this.actions=[{key:"",keyDefine:"",keyType:"",valueDefine:"",value:{}}]}}},methods:{handleActionChange(e,t){this.actions[t]=e,this.$emit("change",this.actions)},handleActionDelete(e){this.actions.splice(e,1)},addAction(){if(this.actions.length>=6)return void this.$message.warning("一个节点最多允许添加6个响应行为！");const e={key:"",keyDefine:"",keyType:"",valueDefine:"",value:{}};this.actions.push(e)}},components:{actionItem:nt}},lt=rt,dt=(0,$.A)(lt,I,O,!1,null,"745bf39e",null),ct=dt.exports,pt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setter-wrapper"},[e._l(e.conditions,(function(s,o){return t("condition-item",{key:o,staticClass:"setter-item",attrs:{title:`条件${o+1}（C${o+1}）`,value:s,context:e.context,current:e.current,lf:e.lf},on:{change:function(t){return e.handleConditionChange(t,o)},delete:function(t){return e.handleConditionDelete(o)}}})})),t("el-link",{staticClass:"add-button",attrs:{type:"primary",underline:!1},on:{click:e.addCondition}},[t("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 添加条件 ")]),t("el-row",{staticClass:"setter-footer"},[e.conditions.length?t("el-radio-group",{attrs:{size:"small"},on:{change:e.handleCombineTypeChange},model:{value:e.combineType,callback:function(t){e.combineType=t},expression:"combineType"}},[t("el-radio",{attrs:{label:1,size:"small"}},[e._v("满足所有条件")]),t("el-radio",{attrs:{label:2}},[e._v("满足任意条件")]),t("el-radio",{attrs:{label:3}},[e._v("自定义")]),t("el-input",{staticClass:"input",attrs:{placeholder:"例如：C1&&(C2||C3)",size:"small",disabled:3!==e.combineType},on:{change:e.handleCombineTypeChange},model:{value:e.combineRule,callback:function(t){e.combineRule=t},expression:"combineRule"}})],1):e._e()],1)],2)},ht=[],ut=function(){var e=this,t=e._self._c;return t("div",{staticClass:"action-item-wrap"},[t("div",{staticClass:"header"},[e._v(" "+e._s(e.title)+" "),t("span",{staticClass:"delete",staticStyle:{cursor:"pointer"},on:{click:e.handleDelete}},[t("i",{staticClass:"el-icon-delete"}),e._v(" 删除 ")])]),t("el-row",{attrs:{gutter:8}},[t("el-col",{attrs:{span:10}},[t("value-collector",{attrs:{context:e.context,lf:e.lf,types:e.keyTypes,value:e.condition.key},on:{change:e.handleKeyChange}})],1),t("el-col",{attrs:{span:4}},[t("el-select",{staticClass:"use-property",attrs:{size:"small",placeholder:"请选择"},on:{change:e.handleOperatorChange},model:{value:e.condition.operator,callback:function(t){e.$set(e.condition,"operator",t)},expression:"condition.operator"}},e._l(e.comparisonOperators,(function(e,s){return t("el-option",{key:s,attrs:{label:e.value,value:e.value}})})),1)],1),t("el-col",{attrs:{span:10}},[t("value-collector",{attrs:{options:e.valueOptions,context:e.context,lf:e.lf,types:e.valueTypes,value:e.condition.value},on:{change:e.handleValueChange}})],1)],1)],1)},mt=[];const gt=[{name:"严格等于",value:"==="},{name:"不严格等于",value:"!=="},{name:"等于",value:"=="},{name:"不等于",value:"!="},{name:"大于",value:">"},{name:"小于",value:"<"},{name:"大于等于",value:">="},{name:"小于等于",value:"<="}];var vt={props:{lf:Object,context:Object,current:Object,value:[String,Number,Boolean,Object,Array],title:String},model:{prop:"value",event:"change"},data(){return{comparisonOperators:gt,condition:{},val:{},valueOptions:[],keyTypes:["component","componentProp","dataSource","dataConvert","urlParam","initParam"],valueTypes:["option","input","component","componentProp","dataSource","dataConvert","urlParam","initParam"]}},watch:{value:{deep:!0,immediate:!0,handler(e){this.condition=e}},condition:{deep:!0,immediate:!0,handler(e){this.valueTypes=["input","component","componentProp","dataSource"],this.valueOptions=[]}}},methods:{handleKeyChange(e){this.condition.key=e,this.$emit("change",this.condition)},handleValueChange(e){this.condition.value=e,this.$emit("change",this.condition)},handleOperatorChange(){this.$emit("change",this.condition)},handleDelete(){this.$emit("delete")}},components:{valueCollector:st}},yt=vt,ft=(0,$.A)(yt,ut,mt,!1,null,"76bfb9e4",null),bt=ft.exports,xt={props:{lf:Object,context:Object,current:Object,value:[String,Number,Boolean,Object,Array]},model:{prop:"value",event:"change"},data(){return{combineType:1,combineRule:"",conditions:[]}},watch:{value:{deep:!0,immediate:!0,handler(e){e&&e.conditions&&e.conditions.length?(this.conditions=e.conditions||[],this.combineRule=e.combineRule||"",this.combineType=e.combineType||1,this.handleCombineType()):(this.conditions=[],this.combineRule="",this.combineType=1)}},combineType:{immediate:!0,handler(e){this.handleCombineType()}}},methods:{handleConditionChange(e,t){this.conditions[t]=e,this.$emit("change",{combineRule:this.combineRule,conditions:this.conditions,combineType:this.combineType})},handleConditionDelete(e){this.conditions.splice(e,1),this.$emit("change",{combineRule:this.combineRule,conditions:this.conditions,combineType:this.combineType}),this.handleCombineType()},handleCombineTypeChange(){this.handleCombineType(),this.$emit("change",{combineRule:this.combineRule,conditions:this.conditions,combineType:this.combineType})},handleCombineType(){switch(this.combineType){case 1:this.combineRule=this.conditions.map(((e,t)=>`C${t+1}`)).join("&&");break;case 2:this.combineRule=this.conditions.map(((e,t)=>`C${t+1}`)).join("||");break}},addCondition(){if(this.conditions.length>=6)return void this.$message.warning("一条线最多允许添加6个判断条件！");const e={operator:"==",key:{},value:{}};this.conditions.push(e),this.handleCombineType()}},components:{conditionItem:bt}},Ct=xt,_t=(0,$.A)(Ct,pt,ht,!1,null,"777e9f2f",null),Nt=_t.exports,wt=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"event-panel-wrapper setter-wrap"},[t("div",{staticClass:"event-label"},[e._v("触发后续行为的事件：")]),t("el-select",{staticClass:"event-select",attrs:{value:e.selectValue,clearable:"",size:"small",placeholder:"请选择"},on:{change:e.handleChange}},e._l(e.eventOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,size:"small",value:e.value}})})),1)],1)])},kt=[],Pt={props:{lf:Object,context:Object,current:Object,value:{type:Object,default:()=>{}}},model:{prop:"value",event:"change"},computed:{selectValue(){return this.value.key},eventOptions(){const e=this.current.getLogic(),t=e.events,s=t&&t.map((e=>({label:e.description,value:e.name})))||[];return s}},methods:{handleChange(e){const t=this.eventOptions.find((t=>t.value===e))||{},s={keyDefine:t.label,key:t.value};this.$emit("change",s)}}},Mt=Pt,It=(0,$.A)(Mt,wt,kt,!1,null,"7575ba58",null),Ot=It.exports,Tt=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isFetching,expression:"isFetching"}],staticClass:"ds-panel-wrapper"},[t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"ds-label"},[e._v("请求来源：")]),t("el-radio-group",{staticClass:"ds-type-radio",attrs:{size:"small"},on:{change:e.handleDsTypeChange},model:{value:e.fetchMode,callback:function(t){e.fetchMode=t},expression:"fetchMode"}},[t("el-radio",{attrs:{label:"direct"}},[e._v("宿主系统")]),t("el-radio",{attrs:{label:"redirect"}},[e._v("资源引擎")]),t("el-radio",{attrs:{label:"custom"}},[e._v("自定义")])],1)],1),"custom"!==e.fetchMode?t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"ds-label"},[e._v("请求接口：")]),"direct"===e.fetchMode||"redirect"===e.fetchMode?t("el-select",{staticClass:"ds-select",attrs:{filterable:"",size:"small",placeholder:"请选择"},on:{change:e.handleDsChange},model:{value:e.apiId,callback:function(t){e.apiId=t},expression:"apiId"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,size:"small",value:e.value}})})),1):e._e()],1):e._e(),"custom"===e.fetchMode?t("div",{staticClass:"panel-item item-wrap"},[t("CurlImport",{on:{import:e.$_importData}})],1):e._e(),"custom"===e.fetchMode?t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"ds-label"},[e._v("请求接口名称：")]),t("el-input",{attrs:{placeholder:"请输入",size:"small"},on:{change:e.handleDsChange},model:{value:e.requestName,callback:function(t){e.requestName=t},expression:"requestName"}})],1):e._e(),"custom"===e.fetchMode?t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"ds-label"},[e._v("请求接口地址：")]),t("el-input",{attrs:{placeholder:"请输入",size:"small"},on:{change:e.handleDsChange},model:{value:e.requestUrl,callback:function(t){e.requestUrl=t},expression:"requestUrl"}})],1):e._e(),"custom"===e.fetchMode?t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"ds-label"},[e._v("请求方法：")]),t("el-select",{staticClass:"ds-select",attrs:{filterable:"",size:"small",placeholder:"请选择"},on:{change:e.handleDsChange},model:{value:e.requestMethod,callback:function(t){e.requestMethod=t},expression:"requestMethod"}},e._l(e.requestMethodMap,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,size:"small",value:e.value}})})),1)],1):e._e(),t("div",{staticClass:"item-wrap"},[t("div",{staticClass:"ds-label"},[e._v("请求参数配置：")]),t("el-tabs",{model:{value:e.activeType,callback:function(t){e.activeType=t},expression:"activeType"}},[t("el-tab-pane",{attrs:{label:"Query",name:"query"}},[t("param-collector",{attrs:{lf:e.lf,paramList:e.queryParamList,context:e.context},on:{change:e.handleQueryParamsChange},model:{value:e.queryParams,callback:function(t){e.queryParams=t},expression:"queryParams"}})],1),t("el-tab-pane",{attrs:{label:"Body",name:"body"}},[t("param-collector",{attrs:{lf:e.lf,paramList:e.bodyParamList,context:e.context},on:{change:e.handleBodyParamsChange},model:{value:e.bodyParams,callback:function(t){e.bodyParams=t},expression:"bodyParams"}})],1)],1)],1),"direct"===e.fetchMode?t("div",{staticClass:"item-wrap"},[t("div",{staticClass:"ds-label"},[e._v("请求失败配置：")]),t("div",[e._v(" 当请求失败时，是否继续执行后续逻辑： "),t("el-switch",{attrs:{"active-text":"是","inactive-text":"否",size:"mini"},on:{change:e.handleErrorChange},model:{value:e.continueOnError,callback:function(t){e.continueOnError=t},expression:"continueOnError"}})],1)]):e._e()])},Et=[],St=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paramList,border:!0,type:"selection"}},[t("el-table-column",{attrs:{prop:"key",label:"KEY",width:"160"},scopedSlots:e._u([{key:"default",fn:function(s){return["custom"!==s.row.keyType?t("div",[t("span",{staticClass:"required"},[e._v(e._s(s.row.required?"*":""))]),e._v(" "+e._s(s.row.key)+" ")]):t("el-input",{attrs:{placeholder:"请输入",size:"small"},on:{change:function(t){return e.handleKeyChange(t,s.row)}},model:{value:s.row.key,callback:function(t){e.$set(s.row,"key",t)},expression:"scope.row.key"}})]}}])}),t("el-table-column",{attrs:{prop:"value",label:"VALUE"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("value-collector",{staticClass:"value-select",attrs:{value:e.param[s.row.key],name:s,context:e.context,types:e.types,defaultValue:e.defaultValue,lf:e.lf},on:{change:function(t){return e.handleValueChange(t,s.row)}}})]}}])}),t("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{icon:"el-icon-delete",circle:"",type:"danger",size:"mini",disabled:!!s.row.required},on:{click:function(t){return e.removeParam(s.row)}}})]}}])})],1),t("el-link",{staticClass:"add-button",attrs:{type:"primary",underline:!1},on:{click:e.addCustom}},[t("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 添加自定义参数 ")])],1)},Lt=[],Dt=s(6440),jt={props:{context:Object,lf:Object,defaultValue:[String,Number,Boolean,Object,Array],paramList:Array,value:{type:Array,default:()=>[]}},watch:{value:{deep:!0,immediate:!0,handler(e){const t=this.convertParam(e);this.param=t}}},data(){return{list:[],types:["input","dataSource","dataConvert","urlParam","initParam"],param:{}}},methods:{formatParam(){const e=Object.keys(this.param),t=e.map((e=>({key:e,paramType:this.param[e].paramType,keyType:e?this.param[e].keyType:"custom",value:this.param[e]})));return t},convertParam(e){const t={};return e.map((e=>{t[e.key]=e.value})),t},handleValueChange(e,t){const s=t.key;this.param[s]=e,this.param[s].paramType=t.paramType,this.param[s].keyType=t.keyType;const o=this.formatParam();this.$emit("change",o)},handleKeyChange(e,t){console.log("2",t);const s=t.key;this.param[s]=t.value||{},this.param[s].keyType=t.keyType;const o=this.formatParam();this.$emit("change",o)},removeParam(e){const t=(0,Dt.A)(this.paramList,(t=>t.key===e.key));this.paramList.splice(t,1),delete this.param[e.key];const s=this.formatParam();this.$emit("change",s)},addCustom(){const e={key:"",value:"",required:0,keyType:"custom"};this.paramList.push(e)}},components:{valueCollector:st}},At=jt,zt=(0,$.A)(At,St,Lt,!1,null,"26ffbfec",null),$t=zt.exports,Vt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"curl-import"},[t("el-button",{staticClass:"import-btn",attrs:{type:"text"},on:{click:e.$_openDialog}},[e._v("从cURL语句导入")]),t("el-dialog",{attrs:{visible:e.dialogInfo.visible,"destroy-on-close":"",title:"cURL语句导入","custom-class":"ds-dialog__import","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dialogInfo,"visible",t)}}},[t("div",[t("el-input",{attrs:{type:"textarea",autosize:{minRows:8}},model:{value:e.dialogInfo.value,callback:function(t){e.$set(e.dialogInfo,"value",t)},expression:"dialogInfo.value"}})],1),t("div",{staticClass:"btns",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.$_cancelImport}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.$_confirmImport}},[e._v("导入")])],1)])],1)},Rt=[],qt={name:"",components:{},data(){return{dialogInfo:{visible:!1,value:""}}},methods:{$_openDialog(){this.dialogInfo={visible:!0,value:""}},$_cancelImport(){this.dialogInfo.visible=!1},$_confirmImport(){this.$emit("import",this.$_getRequestMsg(this.dialogInfo.value)),this.dialogInfo.visible=!1},$_getRequestMsg(e){const t={requestMethod:"GET"},s=e.match(/\s-G\s/)||e.match(/\s--get\s/);s&&(t.requestMethod="GET");const o=e.split(" \\");let a={},i={};return o.forEach((e=>{const o=/'[\s\S]*'/;if(e.match(/curl\s/)){const s=/(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+\b/,o=e.match(s);if(o){const e=o[0].split("?");t.requestUrl=e[0],e[1]&&(a={...a,...parseQueryString(`?${e[1]}`)})}}(e.match(/\s-X\s/)||e.match(/\s--request\s/))&&(e.indexOf("POST")>-1?t.requestMethod="POST":e.indexOf("GET")>-1&&(t.requestMethod="GET"));const n=[/\s-d\s/,/\s--data\s/,/\s--data-urlencode\s/,/\s--data-raw\s/,/\s--data-binary\s/,/\s--data-ascii\s/];if(n.some((t=>!!e.match(t)))){const n=e.match(o);if(n){const e=n[0].slice(1,-1);try{const o=JSON.parse(e);s?a={...a,...o}:(t.requestMethod="POST",i={...i,...o})}catch(r){const t=new RegExp(/\S+=\S+/);if(t.test(e)){const[t,o]=e.split("=");s?a={...a,[t]:o}:i={...i,[t]:o}}}}}})),t.queryParams=this.transJsonToTable(a),t.bodyParams=this.transJsonToTable(i),t},parseQueryString(e){if(e.length<=0)return{};const t={},s=decodeURIComponent(e).slice(1).split("&");return s.forEach((e=>{const[s,o]=e.split("=");t[s]=o})),t},transJsonToTable(e){const t=[];for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const o=e[s],{fieldType:a,fieldTypeName:i}=this.getPropertyType(o),n="json"===i||"list"===i?JSON.stringify(o):o;t.push({key:s,keyType:"custom",value:{type:"input",keyType:"custom",value:n,dataType:a},required:0})}return t},getPropertyType(e){let t={}.toString.call(e).slice(8,-1).toLowerCase();return{fieldType:t}}}},Bt=qt,Ht=(0,$.A)(Bt,Vt,Rt,!1,null,"55d7d47b",null),Ut=Ht.exports,Ft={props:{lf:Object,context:Object,current:Object,value:{type:Object,default:()=>{}}},model:{prop:"value",event:"change"},data(){return{requestMethodMap:Ze,requestName:"",requestUrl:"",requestMethod:"GET",fetchMode:"direct",apiId:"",activeType:"query",continueOnError:!1,apiList:[],options:[],queryParamList:[],bodyParamList:[],queryParams:[],bodyParams:[],headerParams:[],isFetching:!1}},watch:{"value.fetchMode":{immediate:!0,async handler(e){this.fetchMode=e||"direct"}},"value.id":{immediate:!0,async handler(e){"custom"!==this.value.fetchMode&&(this.apiId=e,e&&(this.options&&this.options.length||await this.getApiOptions(),this.getParamList()))}},value:{immediate:!0,deep:!0,async handler(e){this.queryParams=e&&e.queryParams||[],this.bodyParams=e&&e.bodyParams||[],this.headerParams=e&&e.headerParams||[],this.continueOnError=e.continueOnError,"custom"===this.value.fetchMode&&(this.requestName=e&&e.name,this.requestUrl=e&&e.url,this.requestMethod=e&&e.method,this.queryParamList=this.queryParams,this.bodyParamList=this.bodyParams)}}},created(){this.getApiOptions()},computed:{api(){return this.apiList.find((e=>e.id===this.apiId))||{}}},methods:{async getApiOptions(){this.options=[]},getParamList(){"direct"===this.fetchMode?this.api.id:this.api.resourceId},handleDsTypeChange(e){this.reset(),this.apiId=void 0,this.getApiOptions()},handleDsChange(e){this.reset(),this.apiId=e,this.handleChange()},handleQueryParamsChange(e){this.queryParams=e,this.handleChange()},handleBodyParamsChange(e){this.bodyParams=e,this.handleChange()},handleErrorChange(){this.handleChange()},handleChange(){let e;e="custom"===this.fetchMode?{name:this.requestName,url:this.requestUrl,method:this.requestMethod,fetchMode:"custom",queryParams:this.queryParams,bodyParams:this.bodyParams,headerParams:this.headerParams}:{id:this.api.id,name:this.api.name,key:"direct"===this.fetchMode?this.api.resourceKey:this.api.apiKey,url:this.api.httpApiResourceVO.url,method:this.api.httpApiResourceVO.requestType,contentType:this.api.httpApiResourceVO.contentType,fetchMode:this.api.fetchMode,resourceId:this.api.resourceId,tenant:this.api.tenant,extJson:this.api.extJson,queryParams:this.queryParams,bodyParams:this.bodyParams,headerParams:this.headerParams,continueOnError:this.continueOnError},this.$emit("change",e)},reset(){this.queryParamList=[],this.bodyParamList=[],this.queryParams=[],this.bodyParams=[],this.headerParams=[]},$_importData({requestMethod:e,requestUrl:t,queryParams:s,bodyParams:o}){this.requestMethod=e,this.requestUrl=t,this.queryParams=o,this.bodyParams=o,this.handleChange()}},components:{paramCollector:$t,CurlImport:Ut}},Gt=Ft,Jt=(0,$.A)(Gt,Tt,Et,!1,null,"3331574a",null),Kt=Jt.exports,Yt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setter-wrap"},[t("label",{staticClass:"label"},[e._v("节点名称:")]),t("el-input",{staticClass:"input",attrs:{placeholder:"请输入值",size:"small"},on:{change:e.handleChange},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}),e._m(0)],1)},Xt=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tip"},[t("span",[e._v("*")]),e._v(" 建议为节点设置名称，以免后续出现同名节点")])}],Wt={props:{value:String},data(){return{val:""}},watch:{value:{immediate:!0,deep:!0,handler(e){this.val=e}}},methods:{handleChange(e){this.val=e,this.$emit("change",e)}}},Zt=Wt,Qt=(0,$.A)(Zt,Yt,Xt,!1,null,"0d874400",null),es=Qt.exports,ts=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pj-panel-wrapper"},[t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"pj-label"},[e._v("页面跳转类型：")]),t("el-radio-group",{staticClass:"pj-radio-group",attrs:{size:"small"},on:{change:t=>e.handleParamChange("jumpType",t)},model:{value:e.params.jumpType,callback:function(t){e.$set(e.params,"jumpType",t)},expression:"params.jumpType"}},[t("el-radio",{attrs:{label:"suda"}},[e._v("配置页面")]),t("el-radio",{attrs:{label:"custom"}},[e._v("自定义页面")])],1)],1),t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"pj-label"},[e._v("页面打开方式：")]),t("el-radio-group",{staticClass:"pj-radio-group",attrs:{size:"small"},on:{change:t=>e.handleParamChange("target",t)},model:{value:e.params.target,callback:function(t){e.$set(e.params,"target",t)},expression:"params.target"}},[t("el-radio",{attrs:{label:"_self"}},[e._v("当前页面")]),t("el-radio",{attrs:{label:"_blank"}},[e._v("打开新 Tab")])],1)],1),"custom"===e.params.jumpType?t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"pj-label"},[e._v("目标系统：")]),t("el-radio-group",{staticClass:"pj-radio-group",attrs:{size:"small"},on:{change:t=>e.handleParamChange("system",t)},model:{value:e.params.system,callback:function(t){e.$set(e.params,"system",t)},expression:"params.system"}},[t("el-radio",{attrs:{label:"_current"}},[e._v("宿主系统")]),t("el-radio",{attrs:{label:"_other"}},[e._v("其他")])],1)],1):e._e(),"suda"===e.params.jumpType?t("div",[t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"pj-label"},[e._v("目标页面：")]),t("el-select",{staticClass:"pj-select",attrs:{placeholder:"请选择",size:"small"},on:{change:t=>e.handleParamChange("formKey",t)},model:{value:e.params.formKey,callback:function(t){e.$set(e.params,"formKey",t)},expression:"params.formKey"}},e._l(e.sudaPageList,(function(e){return t("el-option",{key:e.formKey+e.version,attrs:{label:e.name,value:e.formKey}})})),1)],1),t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"pj-label"},[e._v("页面路由：")]),t("el-input",{staticClass:"pj-input",attrs:{placeholder:"请输入系统路由，例如：'preview'",size:"small"},on:{change:t=>e.handleParamChange("path",t)},model:{value:e.params.path,callback:function(t){e.$set(e.params,"path",t)},expression:"params.path"}})],1)]):t("div",{staticClass:"panel-item item-wrap"},[t("div",{staticClass:"pj-label"},[e._v("目标页面：")]),"_current"===e.params.system?t("el-input",{staticClass:"pj-input",attrs:{type:"url",placeholder:"请输入目标页面系统路径，例如：'path1/path2/path3'",size:"small"},on:{change:t=>e.handleParamChange("customUrl",t)},model:{value:e.params.customUrl,callback:function(t){e.$set(e.params,"customUrl",t)},expression:"params.customUrl"}}):t("el-input",{staticClass:"pj-input",attrs:{type:"url",placeholder:"请输入目标页面，例如：'https://i.xiaojukeji.com?q=xxx&t=yyy'",size:"small"},on:{change:e.handleCustomUrlChange},model:{value:e.params.customUrl,callback:function(t){e.$set(e.params,"customUrl",t)},expression:"params.customUrl"}})],1),t("div",{staticClass:"item-wrap"},[t("div",{staticClass:"pj-label"},[e._v("路由参数：")]),e._l(e.params.routeParams,(function(s,o){return t("div",{key:o,staticClass:"param-wrapper"},[t("div",{staticClass:"pj-label"},[e._v("KEY")]),t("el-input",{staticClass:"pj-param-input",attrs:{placeholder:"请输入",size:"small"},on:{change:function(t){return e.handleRouteParamKeyChange(t,o)}},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"route.key"}}),t("div",{staticClass:"pj-label"},[e._v("VALUE")]),t("value-collector",{staticClass:"value-select",attrs:{value:s.value,context:e.context,types:e.types,lf:e.lf},on:{change:function(t){return e.handleRouteParamValueChange(t,o)}}}),t("el-link",{staticClass:"delete-button",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteParam(o)}}})],1)})),t("el-link",{staticClass:"add-button",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addParam}},[e._v(" 添加参数 ")])],2)])},ss=[],os=(s(1412),s(1883),s(286),s(1153)),as=s.n(os),is=s(8147),ns={components:{valueCollector:st},props:{lf:Object,context:Object,current:Object,value:{type:Object,default:()=>{}}},model:{prop:"value",event:"change"},data(){return{params:{jumpType:"suda",target:"_self",system:"_current",formKey:void 0,path:"",customUrl:"",routeParams:[]},types:["input","dataSource","dataConvert","urlParam","initParam"],sudaPageList:[]}},watch:{value:{deep:!0,immediate:!0,handler(e){e&&(this.params={...this.params,...e})}}},async mounted(){this.sudaPageList=[]},methods:{addParam(){const e={key:"",value:void 0};this.params.routeParams.push(e)},deleteParam(e){this.params.routeParams.splice(e,1)},handleParamChange(e,t){this.params[e]=t,this.$emit("change",this.params),"jumpType"===e?(this.params.formKey=void 0,this.params.path="",this.params.customUrl="",this.params.routeParams=[]):"system"===e&&(this.params.customUrl="")},handleCustomUrlChange(e){try{const t=new URL(e),{hash:s,search:o}=t;let a={};if(s.indexOf(!1)){const e=s.split("?")[1],t=as().parse(e);a={...a,...t}}if(o.indexOf(!1)){const e=o.split("?")[1],t=as().parse(e);a={...a,...t}}const i=[];(0,is.A)(a,((e,t)=>{i.push({key:t,value:{dataType:"string",type:"input",value:e}})})),this.params.routeParams=i;const n=e.indexOf("#"),r=e.lastIndexOf("?");this.params.customUrl=r>n&&r>-1?e.slice(0,r):e}catch(t){this.$message.error("请输入正确的 URL"),this.params.customUrl="",this.params.routeParams=[]}this.$emit("change",this.params)},handleRouteParamKeyChange(e,t){this.params.routeParams[t].key=e,this.$emit("change",this.params)},handleRouteParamValueChange(e,t){this.params.routeParams[t].value=e;this.$emit("change",this.params)}}},rs=ns,ls=(0,$.A)(rs,ts,ss,!1,null,"249b69ba",null),ds=ls.exports,cs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dc-panel-wrapper"},[t("div",{staticClass:"item-wrap"},[t("div",{staticClass:"dc-label"},[e._v("变量：")]),e._l(e.params.convertList,(function(s,o){return t("div",{key:o,staticClass:"param-wrapper"},[t("div",{staticClass:"dc-label"},[e._v("KEY: ")]),t("el-input",{staticClass:"dc-param-input",attrs:{placeholder:"请输入",size:"small"},on:{change:function(t){return e.handleResourceKeyChange(t,o)}},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"source.key"}}),e._m(0,!0),t("value-collector",{staticClass:"value-select",attrs:{value:s.value,context:e.context,types:e.types,lf:e.lf},on:{change:function(t){return e.handleResourceValueChange(t,o)}}}),t("el-link",{staticClass:"delete-button",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteParam(o)}}})],1)})),t("el-link",{staticClass:"add-button",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addParam}},[e._v(" 添加变量 ")])],2),t("div",{staticClass:"item-wrap"},[t("div",{staticClass:"dc-label"},[e._v("转换函数体：")]),t("el-alert",{attrs:{title:"如上配置的转换源数据 key 可直接作为变量名在下面函数体中使用",type:"warning"}}),t("div",{attrs:{id:"my-editor"}})],1)])},ps=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"dc-label"},[t("span",[e._v("=")]),e._v("VALUE:")])}],hs=(s(9286),{components:{valueCollector:st},props:{context:Object,lf:Object,value:{type:Object,default:()=>{}}},model:{prop:"value",event:"change"},watch:{value:{deep:!0,immediate:!0,handler(e){this.params={...this.params,...e}}}},data(){return{flask:void 0,params:{convertList:[],convertCode:""},types:["dataSource","dataConvert","urlParam","initParam"]}},async mounted(){console.log("mounted ---\x3e>>")},methods:{addParam(){const e={key:"",value:void 0};this.params.convertList.push(e)},deleteParam(e){this.params.convertList.splice(e,1)},handleResourceKeyChange(e,t){this.params.convertList[t].key=e,this.$emit("change",this.params)},handleResourceValueChange(e,t){this.params.convertList[t].value=e,this.$emit("change",this.params)}}}),us=hs,ms=(0,$.A)(us,cs,ps,!1,null,"b79ee1ca",null),gs=ms.exports,vs={props:{lf:Object,context:Object},data(){return{panelType:"",showDrawer:!1,currentModel:{},currentNode:{},currentEdge:{},actions:[],condition:{},event:{},ds:{},pageJump:{},dc:{},name:""}},mounted(){this.lf.on("node:click",(({data:e})=>{console.log("data",e)})),this.lf.on("blank:click",(()=>{this.showDrawer=!1,this.panelType="",this.currentEdge=null})),this.lf.on("edge:option-click",(e=>{this.currentEdge=e;const t=e.getProperties();this.condition=t.condition||{},this.showDrawer=!0,this.panelType="condition"})),this.lf.on("node:select-click",(e=>{console.log("model ===>>>",e),this.currentNode=e;const t=e.getProperties();switch(this.name=t.name,e.type){case"event-node":this.event=t&&t.event||{},this.panelType="event",e.properties&&"pageInit"!==e.properties.componentName&&(this.showDrawer=!0);break;case"reaction-node":this.actions=t&&t.reactions||[],this.panelType="action",this.showDrawer=!0;break;case"common-node":t&&"dataSource"===t.componentName?(this.ds=t&&t.ds||{},this.panelType="ds",this.showDrawer=!0):t&&"pageJump"===t.componentName?(this.pageJump=t&&t.pageJump||{},this.panelType="pageJump",this.showDrawer=!0):t&&"dataConvert"===t.componentName&&(this.dc=t&&t.dc||{},this.panelType="dc",this.showDrawer=!0);break}}))},methods:{handleChange(e,t){this[t]=e},handelNameChange(e){this.name=e},handleSubmit(){const e=this.currentNode;switch(this.lf.setProperties(e.id,{name:this.name}),console.log("this.panelType ...???",this.panelType),this.panelType){case"action":this.lf.setProperties(e.id,{reactions:this.actions});break;case"condition":this.currentEdge&&this.lf.setProperties(this.currentEdge.id,{condition:this.condition});break;case"event":this.lf.setProperties(e.id,{event:this.event});break;case"ds":this.lf.setProperties(e.id,{ds:this.ds});break;case"pageJump":this.lf.setProperties(e.id,{pageJump:this.pageJump});break;case"dc":{const{convertList:s=[],convertCode:o}=this.dc;if(!o)return this.$message.error("数据转换函数不能为空"),!1;try{const e=(0,C.A)((0,_.A)(s,(e=>e.key)),(e=>e)),t=e.join(", "),a=`function main(${t}) {\n              ${o}\n            }`,i=M(a);if(!i)throw new Error("代码校验未通过，请确认代码是否合规")}catch(t){return console.error("ops, something error ---\x3e>>",t),void this.$message.error(t?.message)}this.lf.setProperties(e.id,{dc:this.dc});break}}this.showDrawer=!1,this.$emit("submit",this.panelType)},handleCancel(){this.showDrawer=!1},closeDrawer(){this.currentEdge=null}},components:{conditionSetter:Nt,actionSetter:ct,eventSetter:Ot,dsSetter:Kt,nameSetter:es,pageJumpSetter:ds,dcSetter:gs}},ys=vs,fs=(0,$.A)(ys,b,x,!1,null,"152bc446",null),bs=fs.exports,xs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"node-menu-wrapper"},[t("div",{staticClass:"node-add-title"},[e._v("通用节点:")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-menu",{staticClass:"node-menu",attrs:{mode:"vertical",open:!0},on:{select:e.addCommonNode}},e._l(e.commonNodeMap,(function(s,o){return t("el-menu-item",{key:o,attrs:{index:s.value}},[t("span",{staticClass:"menu-item-inner"},[t("img",{staticClass:"icon",attrs:{src:s.logo,alt:""}}),e._v(" "+e._s(s.label)+" ")])])})),1)],1),e.showConnectBlock&&e.nodeOptions.length?t("div",{staticClass:"split-line"}):e._e(),e.showConnectBlock&&e.nodeOptions.length?t("div",{staticClass:"node-add-title"},[e._v("连接至已有节点:")]):e._e(),e.showConnectBlock&&e.nodeOptions.length?t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-menu",{staticClass:"node-menu",attrs:{mode:"vertical",open:!0},on:{select:e.connectToNode}},e._l(e.nodeOptions,(function(s,o){return t("el-menu-item",{key:o,attrs:{index:s.value}},[t("span",{staticClass:"menu-item-inner",on:{mouseenter:function(t){return t.stopPropagation(),e.handleNodeEnter(s.value)}}},[t("img",{staticClass:"icon",attrs:{src:s.logo,alt:""}}),e._v(" "+e._s(s.label)+" ")])])})),1)],1):e._e()])},Cs=[],_s={props:{lf:Object,show:Boolean,context:Object,graph:Object,position:Object,model:Object,showConnectBlock:Boolean},data(){return{key:1,preNodeId:"",commonNodeMap:Ke}},computed:{compOptions(){const e=[];return e},nodeOptions(){const e=this.lf.getGraphData(),{nodes:t}=e,s=[];return t.forEach((e=>{if("event-node"===e.type)return;const t=e.properties&&e.properties.name||"未知",o=e.properties&&e.properties.logo||We;s.push({value:e.id,label:t,logo:o})})),s}},methods:{hide(){const e=this.model.id;setTimeout((()=>{this.lf.graphModel.popover.hide(e)}),50)},handleCompEnter(e){},handleNodeEnter(e){const t=this.lf.getNodeModelById(e);this.lf.graphModel.eventCenter.emit("node:hover-node",t)},handleChange(e){this.val=e;const t=this.options.find((t=>t.value===e))||{},s={type:"option",value:e,valueDesc:t.label};this.$emit("change",s)},addCommonNode(e){console.log("e",e),this.hide();const t={};"pageInit"===e?(t.type="event-node",t.properties={componentId:"page_init",name:Ke[e].label,componentName:e,logo:Ke[e].logo}):(t.type="common-node",t.properties={type:e,name:Ke[e].label,componentName:e,logo:Ke[e].logo}),this.model?(t.model=this.model,this.lf.graphModel.eventCenter.emit("node:add-node",t)):this.addNodeInPosition(t)},addCompNode(e){this.hide();const t=this.modelList.find((t=>t.id===e)),s=(t.getLogic(),t.componentName),o=this.context.getMaterialByType(s),a=o.logo||We,i={type:"reaction-node",properties:{name:ie(t),componentId:t.id,componentName:t.componentName,logo:a}};this.model&&(i.model=this.model,this.lf.graphModel.eventCenter.emit("node:add-node",i))},connectToNode(e){this.hide(),this.graph.connectToNode(e,this.model)}}},Ns=_s,ws=(0,$.A)(Ns,xs,Cs,!1,null,"3dfc4d62",null),ks=ws.exports,Ps=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbar-wrap"},[t("span",{directives:[{name:"show",rawName:"v-show",value:"edit"===e.mode,expression:"mode === 'edit'"}],staticClass:"text"},[e._v(e._s(e.text))]),t("div",{staticClass:"toolbar"},e._l(e.toolList,(function(s,o){return t("el-tooltip",{key:o,attrs:{effect:"dark",content:s.desc,placement:"bottom","popper-class":"logic-tooltip-pop"}},[t("span",{staticClass:"tool-item",class:[e.currentTool===s.name&&"selected",s.disabled&&"disabled"],on:{click:function(t){return t.stopPropagation(),e.handleClick(s,t)}}},[t("img",{attrs:{src:s.icon}})])])})),1)])},Ms=[],Is={props:{lf:Object,graph:Object,mode:{type:String,default:"edit"}},data(){return{text:"根据需求配置执行流程图",currentTool:"",undoAble:!1,redoAble:!1}},computed:{toolList(){return Object.values(Xe).map((e=>{switch(e.name){case"undo":e.disabled=!this.undoAble;break;case"redo":e.disabled=!this.redoAble;break;case"beautify":e.disabled=!1;break;case"selection":e.disabled="preview"===this.mode;break;case"navigation":e.disabled="preview"===this.mode;break;default:e.disabled=!1;break}return e}))}},mounted(){document.addEventListener("click",(e=>{"lf-mini-map-close"===e.target.className&&(this.currentTool="")}),!0)},watch:{lf(){this.lf&&this.lf.on("selection:selected",(()=>{this.currentTool="",this.lf.extension.selectionSelect.closeSelectionSelect()}))},graph(){this.graph&&this.graph.context.eventCenter.on(ae.LOGIC_HISTORY_CHANGE,(({canUndo:e,canRedo:t})=>{this.undoAble=e,this.redoAble=t}))}},methods:{handleClick(e,t){if(this.currentTool="",e.disabled)return;const s=e.name;switch(s){case"beautify":this.lf.extension.dagre&&this.lf.extension.dagre.layout({nodesep:2,ranksep:20,begin:[100,100]});break;case"redo":this.graph&&this.graph.redo();break;case"undo":this.graph&&this.graph.undo();break;case"zoomIn":this.lf.zoom(!0);break;case"zoomOut":this.lf.zoom(!1);break;case"fitView":this.lf.fitView(100,100);break;case"selection":this.currentTool=s,this.lf.extension.selectionSelect.openSelectionSelect();break;case"navigation":this.currentTool=s;const e=this.lf.getPointByClient(t.x,t.y);this.lf.extension.miniMap.show(e.domOverlayPosition.x-120,40);break}}}},Os=Is,Ts=(0,$.A)(Os,Ps,Ms,!1,null,"0ae673ed",null),Es=Ts.exports,Ss=function(){var e=this,t=e._self._c;return t("div",{staticClass:"line-content",class:e.isSelected&&"selected"},[e.properties.condition&&e.properties.condition&&e.properties.condition.conditions&&e.properties.condition.conditions.length?t("el-popover",{attrs:{placement:"right",width:"200",trigger:"click"},model:{value:e.popVisible,callback:function(t){e.popVisible=t},expression:"popVisible"}},[t("div",{staticClass:"popover-content"},[t("div",{staticClass:"condition-wrap"},[t("div",{staticClass:"condition-title"},[e._v("我配置的条件")]),t("div",{staticClass:"condition-content"},[e._l(e.properties.condition.conditions,(function(s,o){return t("div",{key:o,staticClass:"condition-item"},[t("img",{staticClass:"icon",attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/edge_condition.png",alt:""}}),t("span",[e._v(e._s(e.getConditionItem(s)))])])})),t("div",{staticClass:"condition-button",on:{click:e.goCondition}},[e._v("去配置")])],2)]),t("div",{staticClass:"popover-item",on:{click:e.insertNode}},[t("img",{staticClass:"icon",attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/pop_insert_node.png",alt:""}}),e._v(" 插入节点 ")])]),t("div",{staticClass:"line-icon",class:e.isSelected&&"selected",attrs:{slot:"reference"},on:{click:function(t){return t.stopPropagation(),e.handleIconClick.apply(null,arguments)}},slot:"reference"},[t("img",{staticClass:"icon",attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/edge_condition.png",alt:""}})])]):t("el-popover",{attrs:{placement:"right",width:"100",trigger:"click"},model:{value:e.popVisible,callback:function(t){e.popVisible=t},expression:"popVisible"}},[t("div",{staticClass:"popover-content"},[t("div",{staticClass:"popover-item",on:{click:e.goCondition}},[t("img",{staticClass:"icon",attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/pop_add_option.png",alt:""}}),e._v(" 添加条件 ")]),t("div",{staticClass:"popover-item",on:{click:e.insertNode}},[t("img",{staticClass:"icon",attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/pop_insert_node.png",alt:""}}),e._v(" 插入节点 ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isSelected||e.isHovered,expression:"isSelected || isHovered"}],staticClass:"line-icon",class:e.isSelected&&"selected",attrs:{slot:"reference"},on:{click:function(t){return t.stopPropagation(),e.handleIconClick.apply(null,arguments)}},slot:"reference"},[t("img",{staticClass:"icon",attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/edge_add.png",alt:""}})])])],1)},Ls=[],Ds={props:{model:Object,graphModel:Object,isSelected:Boolean,isHovered:Boolean,properties:Object},data(){return{popVisible:!1}},mounted(){this.graphModel.eventCenter.on("blank:click",(()=>{this.hidePop()})),this.graphModel.eventCenter.on("node:click",(()=>{this.hidePop()})),this.graphModel.eventCenter.on("edge:click",(()=>{this.hidePop()}))},methods:{getConditionItem(e){return this.formatValue(e.key)},formatValue(e){switch(e.type){case"component":return`${e.componentName}的${e.propName}`;case"componentProp":return`${e.componentName}的${e.propName}`;case"dataSource":return`数据节点${e.nodeId}返回值`;case"initParam":return`初始化参数值为: ${e.value}`}},hidePop(){this.popVisible=!1,this.popoverItemKey&&this.graphModel.popover&&this.graphModel.popover.hide(this.popoverItemKey)},handleIconClick(e){this.iconEvent=e,this.graphModel.eventCenter.emit("edge:update-model",this.model)},goCondition(){this.graphModel.eventCenter.emit("edge:option-click",this.model),this.popVisible=!1},insertNode(){const{clientX:e,clientY:t,offsetX:s,offsetY:o}=this.iconEvent,a=this.graphModel.getPointByClient({x:e-s+16,y:t-o+6}),i=a.canvasOverlayPosition;this.model.getData();this.popoverItemKey=this.graphModel.popover.show({type:"tip1",delay:100,key:this.model.id,placement:"right",trigger:"click",width:16,height:16,x:i.x-6,y:i.y,props:{showConnectBlock:!1}}),this.popVisible=!1}}},js=Ds,As=(0,$.A)(js,Ss,Ls,!1,null,"94ea4992",null),zs=As.exports;const $s=e=>{const t=e;let s=1;while(s<t.length-1){const e=t[s-1],o=t[s],a=t[s+1];e.x===o.x&&o.x===a.x||e.y===o.y&&o.y===a.y?t.splice(s,1):s++}return t},Vs=12,Rs=16,qs=16,Bs=16;class Hs extends g.PolylineEdge{constructor(e){super(e),this.vm=new Vue({render:e=>e(zs,{props:{model:this.props.model,graphModel:this.props.graphModel,properties:this.props.model.getProperties(),isSelected:this.props.model.isSelected,isHovered:this.props.model.isHovered}})})}shouldUpdate(){const e={...this.props.model.properties,isSelected:this.props.model.isSelected,isHovered:this.props.model.isHovered};if(!this.preProperties||this.preProperties!==JSON.stringify(e))return this.preProperties=JSON.stringify(e),!0}getText(){const{graphModel:e}=this.props,{pointsList:t,text:s,sourceNodeId:o,targetNodeId:a}=this.props.model;if(!t||0===t.length)return null;let i=0,n=0,r="";const l={},d=e.getNodeIncomingEdge(a);if(d.length&&d.length>1){let e={},s={};t.length>=4?(e=t[t.length-2],s=t[t.length-3]):(e={x:t[0].x+oe,y:t[0].y},s=t[0]),i=Math.abs(e.x-s.x),n=Math.abs(e.y-s.y),r="",l.x=(e.x+s.x)/2-Rs/2,l.y=(e.y+s.y)/2-Rs/2}else{const e=t[t.length-1],s=t[t.length-2];i=Math.abs(e.x-s.x),n=Math.abs(e.y-s.y),r="",e.x<s.x?(r="row",l.x=e.x+Vs,l.y=e.y-Rs/2):e.y<s.y?(r="column",l.x=e.x-qs/2,l.y=e.y+Vs+Rs/2):e.y>s.y?(r="column-reverse",l.x=e.x-qs/2,l.y=e.y-Vs-Rs/2-Bs):(r="row-reverse",l.x=e.x-Vs-i,l.y=e.y-Rs/2)}const{model:c}=this.props,p=c.id;return setTimeout((()=>{const e=document.querySelector("#line_"+p).querySelector(".add-wrapper");this.vm.$mount(e)}),0),(0,g.h)("foreignObject",{...l,id:"line_"+p,style:`z-index: 20; width: ${i||n}px`},[(0,g.h)("div",{style:`display:flex;width: 100%;flex-direction: ${r};`},[(0,g.h)("div",{className:"add-wrapper"})])])}}class Us extends g.PolylineEdgeModel{initEdgeData(e){super.initEdgeData(e),this.offset=oe}setAttributes(){this.offset=oe,"executed"===this.properties.executeStatus?this.setZIndex():this.setZIndex(0)}getEdgeStyle(){const e=super.getEdgeStyle();return e.stroke="#8790A0",e.strokeDasharray="3 2",e.strokeWidth=1,(this.isHovered||this.isSelected)&&(e.stroke="#33DD89"),e}getEdgeAnimationStyle(){const e=super.getEdgeAnimationStyle();e.animationDuration="20s";const{executeStatus:t}=this.properties;return t?(e.strokeDasharray="8 3",e.stroke="executed"===t?"rgb(79 235 151 / 80%)":"red","execute-failed"===t&&(e.strokeDasharray=null)):(e.strokeDasharray="8 3",e.stroke="#33DD89"),e}setHovered(e){super.setHovered(e),this.setZIndex(e?999:0)}setSelected(e){super.setSelected(e),this.setZIndex(e?999:0)}setZIndex(e){this.isHovered||this.isSelected||this.properties.executeStatus?(super.setZIndex(999),this.openEdgeAnimation()):(this.closeEdgeAnimation(),super.setZIndex(e))}initPoints(){if(this.pointsList&&this.pointsList.length>0)return void(this.points=this.pointsList.map((e=>`${e.x},${e.y}`)).join(" "));const{startPoint:e,endPoint:t}=this,{x:s,y:o}=e,{x:a,y:i}=t,n=2*this.offset;s-a<-n?(this.pointsList=$s([{x:s,y:o},{x:s+this.offset,y:o},{x:s+this.offset,y:i},{x:a,y:i}]),this.points=this.pointsList.map((e=>`${e.x},${e.y}`)).join(" ")):s-a>n?(this.pointsList=$s([{x:s,y:o},{x:s+this.offset,y:o},{x:s+this.offset,y:i+se},{x:a-se/2,y:i+se},{x:a-se/2,y:i},{x:a,y:i}]),this.points=this.pointsList.map((e=>`${e.x},${e.y}`)).join(" ")):super.initPoints()}}var Fs={type:"logic-line",model:Us,view:Hs},Gs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"node-wrap",class:[e.properties.status,"base",e.getClassName(),e.properties.executeStatus]},[t("div",{staticClass:"node-title",on:{mousedown:e.handleMousedown,mouseup:e.handleMouseup}},[t("span",{staticClass:"node-icon"},[t("img",{attrs:{src:e.getLogo(),alt:""}})]),t("span",{staticClass:"node-name"},[e._v(e._s(e.getName()))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.properties.warnings&&e.properties.warnings.length,expression:"properties.warnings && properties.warnings.length"}],staticClass:"node-warning"},[t("el-popover",{staticClass:"item",attrs:{placement:"right",width:"auto",offset:-10,trigger:"click","popper-class":"logic-pop"}},[t("abstract-content",{attrs:{title:"配置异常",content:e.properties.warnings,showButton:!1}}),t("div",{staticClass:"warning-tip"},[e._v("请及时调整，以免运行错误！")]),t("span",{staticClass:"icon",attrs:{slot:"reference"},on:{mousedown:function(e){e.stopPropagation()}},slot:"reference"},[t("i",{staticClass:"el-icon-warning"})])],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:("selected"===e.properties.status||"hovered"===e.properties.status)&&!e.disabled,expression:"(properties.status === 'selected' || properties.status === 'hovered') && !disabled"}],staticClass:"node-option",on:{"!mousedown":function(t){return e.selectNode.apply(null,arguments)}}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制节点",placement:"top","popper-class":"logic-tooltip-pop"}},[t("span",{staticClass:"option-icon",on:{click:e.copyNode,mousedown:function(e){e.stopPropagation()}}},[t("img",{attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/node_copy.png"}})])]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"信息概览",placement:"top","popper-class":"logic-tooltip-pop"}},[t("el-popover",{attrs:{placement:"right",width:"188",offset:-10,trigger:"click","popper-class":"logic-pop"}},[t("abstract-content",{attrs:{title:e.getAbstract().title,content:e.getAbstract().content,showButton:e.getAbstract().showButton},on:{config:function(t){return e.goConfig()}}}),t("span",{staticClass:"option-icon",attrs:{slot:"reference"},on:{mousedown:function(e){e.stopPropagation()}},slot:"reference"},[t("img",{attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/node_abstract.png"}})])],1)],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除节点",placement:"top","popper-class":"logic-tooltip-pop"}},[t("el-popconfirm",{staticClass:"item",attrs:{"hide-icon":"",title:"确认删除该节点吗？",placement:"top",width:"180","cancel-button-type":"","popper-class":"logic-pop"},on:{confirm:e.deleteNode}},[t("span",{staticClass:"option-icon",attrs:{slot:"reference"},on:{mousedown:function(e){e.stopPropagation()}},slot:"reference"},[t("img",{attrs:{src:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/node_delete.png"}})])])],1)],1),t("div",{staticClass:"node-next"},[t("span",{directives:[{name:"show",rawName:"v-show",value:"selected"===e.properties.status||"hovered"===e.properties.status,expression:"properties.status === 'selected' || properties.status === 'hovered'"}],on:{mousedown:function(t){return t.stopPropagation(),e.handleNext.apply(null,arguments)}}},[t("i",{staticClass:"el-icon-circle-plus next-icon"})])])])},Js=[],Ks=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-wrap"},[t("div",{staticClass:"title"},[e._v(e._s(e.title))]),t("div",{staticClass:"content"},[e.content&&e.content.length?t("div",e._l(e.content,(function(s,o){return t("div",{key:o,staticClass:"item"},[t("img",{staticClass:"icon",attrs:{src:"event"===s.type?e.eventIcon:e.reactionIcon}}),t("span",[e._v(e._s(s.desc))])])})),0):t("div",[e._v("暂未配置")]),e.showButton?t("div",{staticClass:"button",on:{click:e.goConfig}},[e._v("去配置")]):e._e()])])},Ys=[],Xs={props:{text:String,content:Array,title:String,showButton:Boolean},data(){return{eventIcon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/pop_event.png",reactionIcon:"https://s3-gzpu.didistatic.com/tiyan-base-store/suda/organizer/icons/pop_reaction.png"}},methods:{goConfig(){this.$emit("config")}}},Ws=Xs,Zs=(0,$.A)(Ws,Ks,Ys,!1,null,"8e670ecc",null),Qs=Zs.exports,eo={props:{model:Object,graphModel:Object,isSelected:Boolean,isHovered:Boolean,disabled:Boolean,properties:Object},data(){return{showAddPop:!1}},watch:{isHovered(e){console.log("nv ---\x3e>>",e),e?this.enterNode():this.leaveNode()}},methods:{getAbstract(){return this.model.getNodeAbstract&&this.model.getNodeAbstract()||{}},getName(){return this.model.getNodeName&&this.model.getNodeName()||"未知"},getLogo(){return this.model.getNodeLogo&&this.model.getNodeLogo()||We},getClassName(){return this.model.getNodeClassName&&this.model.getNodeClassName()||""},getWarning(){return this.model.getNodeWarning&&this.model.getNodeWarning()||{}},handleNext(){console.log("this.graphModel ---\x3e>>",this.graphModel);const e=this.model.x,t=this.model.y,s=e+this.model.width/2,o=t;this.popoverItemKey=this.graphModel.popover.show({type:"tip1",key:this.model.id,delay:100,placement:"right",trigger:"click",width:16,height:16,x:s,y:o,props:{showConnectBlock:!0}}),this.selectNode()},handleMousedown(){this.mouseStartTime=(new Date).getTime()},handleMouseup(){const e=(new Date).getTime()-this.mouseStartTime;e<1e3&&setTimeout((()=>{this.graphModel.eventCenter.emit("node:select-click",this.model)}),100)},selectNode(){this.graphModel.eventCenter.emit("node:update-model",this.model)},enterNode(){console.log("this.model ---\x3e>",this.model),console.log("this.properties ---\x3e>",this.properties),this.model.properties&&"selected"===this.model.properties.status||this.model.setProperties({status:"hovered"})},leaveNode(){this.model.properties&&"selected"===this.model.properties.status||this.model.setProperties({status:"normal"})},copyNode(){this.graphModel.eventCenter.emit("node:copy-node",this.model)},deleteNode(){this.graphModel.eventCenter.emit("node:delete-node",this.model)},goConfig(){this.graphModel.eventCenter.emit("node:select-click",this.model)}},components:{abstractContent:Qs}},to=eo,so=(0,$.A)(to,Gs,Js,!1,null,"96eb563e",null),oo=so.exports;const ao=200,io=100;class no extends g.HtmlNode{constructor(e){super(e),this.root=document.createElement("div"),this.vueComponent=oo}shouldUpdate(){const e={...this.props.model.properties,isSelected:this.props.model.isSelected,isHovered:this.props.model.isHovered};if(!this.preProperties||this.preProperties!==JSON.stringify(e))return this.preProperties=JSON.stringify(e),!0}setHtml(e){e.appendChild(this.root),this.vm||(this.vm=new Vue({render:e=>e(this.vueComponent,{props:{model:this.props.model,graphModel:this.props.graphModel,disabled:this.props.graphModel.editConfigModel.isSilentMode,isSelected:this.props.model.isSelected,isHovered:this.props.model.isHovered,properties:this.props.model.getProperties()}})})),this.vm.$mount(this.root)}getAnchorShape(e){const{x:t,y:s,type:o}=e;return(0,g.h)("rect",{x:t-3,y:s-3,width:6,height:6,className:"custom-anchor "+("incomming"===o?"incomming-anchor":"outgoing-anchor")})}}class ro extends g.HtmlNodeModel{setAttributes(){this.width=te,this.height=se+26,this.text.editable=!1,this.sourceRules.push({message:"只允许从右边的锚点连出",validate:(e,t,s,o)=>"incomming"===o.type})}setHeight(e){this.height=e}getOutlineStyle(){const e=super.getOutlineStyle();return e.stroke="none",e.hover.stroke="none",e}getDefaultAnchor(){const{id:e,x:t,y:s,width:o,height:a}=this,i=[];return i.push({x:t-o/2,y:s,id:`${e}_incomming`,edgeAddable:!1,type:"incomming"}),i.push({x:t+o/2,y:s,id:`${e}_outgoing`,type:"outgoing"}),i}addNode(e,t=0){const s=0!==t,o=this.graphModel.getNodeModelById(e.sourceId),a=e.x+ao-50-10,i=e.y+t-40-8,n=e.x+ao+50+10,r=e.y+t+40+8,l=this.graphModel.getAreaElement(this.getHtmlPoint([a,i]),this.getHtmlPoint([n,r]));if(l.length)return void this.addNode(e,t+io);const d=this.graphModel.addNode({type:e.type,x:e.x+ao,y:e.y+t,properties:e.properties});let c,p;s&&(c={x:e.x,y:e.y+o.height/2},p={x:d.x-d.width/2,y:d.y}),this.graphModel.addEdge({sourceNodeId:e.sourceId,targetNodeId:d.id,startPoint:c,endPoint:p}),this.graphModel.selectElementById(d.id),this.graphModel.showContextMenu(d)}}var lo={type:"base-node",model:ro,view:no};class co extends lo.view{}class po extends lo.model{getNodeName(){return this.properties.name}getNodeAbstract(){const e="节点行为",t=[];return this.properties&&this.properties.reactions&&this.properties.reactions.length&&this.properties.reactions.forEach((e=>{t.push({desc:e.keyDefine,type:"reaction"})})),{title:e,content:t,showButton:!0}}getNodeLogo(){return this.properties&&this.properties.logo}}var ho={type:"reaction-node",model:po,view:co};class uo extends lo.view{}class mo extends lo.model{getNodeName(){return this.properties&&this.properties.event&&this.properties.event.keyDefine?this.properties.name+this.properties.event.keyDefine:this.properties.name}getNodeAbstract(){const e="数据请求",t=[];return this.properties&&this.properties.ds&&t.push({desc:this.properties.ds.name,type:"common"}),{title:e,content:t,showButton:!0}}getNodeLogo(){return this.properties&&this.properties.logo}getNodeClassName(){return"common"}}var go={type:"common-node",model:mo,view:uo};class vo extends lo.view{}class yo extends lo.model{getOutlineStyle(){const e=super.getOutlineStyle();return e.stroke="none",e.hover.stroke="none",e}getDefaultAnchor(){const{id:e,x:t,y:s,width:o}=this,a=[];return a.push({x:t+o/2,y:s,id:`${e}_outgoing`,type:"outgoing"}),a}getNodeName(){return this.properties&&this.properties.event&&this.properties.event.keyDefine?this.properties.name+this.properties.event.keyDefine:this.properties.name}getNodeAbstract(){const e="节点事件",t=[];let s=!0;return this.properties&&"pageInit"===this.properties.componentName?(t.push({desc:"页面初始化",type:"event"}),s=!1):this.properties.event&&this.properties.event.keyDefine&&t.push({desc:this.properties.event.keyDefine,type:"event"}),{title:e,content:t,showButton:s}}getNodeLogo(){return this.properties&&"pageInit"===this.properties.componentName?Ye.pageInit.logo:this.properties&&this.properties.logo}getNodeClassName(){return"event"}}var fo={type:"event-node",model:yo,view:vo};const bo=(e=100)=>new Promise((t=>{setTimeout((()=>{t(!0)}),e)})),xo=()=>Math.random().toString(36).substring(2,6),Co=e=>{const t=wo(e),s=Q,o=t.maxY===1/0?ee:t.maxY+W;return{x:s,y:o}},_o=(e,t)=>{const s=e.getNodeOutgoingNode(t.id);if(s.length){const e=No(s),t=e.minX,o=e.maxY+W;return{x:t,y:o}}return{x:t.x+X,y:t.y}},No=e=>{const t=e.reduce(((e,t)=>Math.max(e,t.x)),0),s=e.reduce(((e,t)=>Math.max(e,t.y)),0),o=e.reduce(((e,t)=>Math.min(e,t.x)),1/0),a=e.reduce(((e,t)=>Math.min(e,t.y)),1/0);return{minX:o,minY:a,maxX:t,maxY:s}},wo=e=>{const t=e.getGraphData(),{nodes:s}=t,o=s.reduce(((e,t)=>Math.max(e,t.x)),0),a=s.reduce(((e,t)=>Math.max(e,t.y)),0),i=s.reduce(((e,t)=>Math.min(e,t.x)),1/0),n=s.reduce(((e,t)=>Math.min(e,t.y)),1/0);return{minX:i,minY:n,maxX:o,maxY:a}},ko=(e,t)=>{const s=t||"logic_";return s+Number(Math.random().toString().substr(2,e)+Date.now()).toString(36)};var Po=s(7788);class Mo{constructor(e,t={}){this.option=t,this.lf=e,this.paths=[],this.targetPath={},this.targetNode={},this.targetStartNode={},this.targetPathIndex=void 0,this.nodeMap={},this.edgeMap={}}reset(){this.paths=[],this.targetPath={},this.targetNode={},this.targetStartNode={},this.targetPathIndex=void 0,this.nodeMap={},this.edgeMap={}}getBytesLength(e){if(!e)return 0;let t=0;for(let s=0;s<e.length;s++){const o=e.charCodeAt(s);e.match(/[A-Z]/)?t+=1.5:t+=o>=1&&o<=126||o>=65376&&o<=65439?1:2}return t}layout(e={},t={}){this.reset(),this.targetNode=e,this.getPaths(e),this.paths.forEach(((e,t)=>{e.startNode===this.targetStartNode&&(this.targetPath=e,this.targetPathIndex=t)}));const s=this.getLayoutData(this.targetPath,t),o={nodes:[],edges:[]};s.nodes.forEach((e=>{const{model:t}=e,s=t.getData();s.x=e.x,s.y=e.y,o.nodes.push(s)})),s.edges.forEach((e=>{const{model:t}=e,s=t.getData();o.edges.push(s)}));const a=this.getNodesRect(o.nodes);this.paths.forEach(((e,t)=>{t<this.targetPathIndex&&(e.nodes.forEach((e=>{const t=e.getData();o.nodes.push(t)})),o.edges.push(...e.edges))}));const i=this.paths[this.targetPathIndex+1];if(i)if(this.isOverlap(i.rect,a)){const e=a.maxY-i.rect.minY+Z;this.paths.forEach(((t,s)=>{s>this.targetPathIndex&&(t.nodes.forEach((t=>{const s=t.getData();s.y=s.y+e,o.nodes.push(s)})),o.edges.push(...t.edges))}))}else this.paths.forEach(((e,t)=>{t>this.targetPathIndex&&(e.nodes.forEach((e=>{const t=e.getData();o.nodes.push(t)})),o.edges.push(...e.edges))}));const n=[];o.edges.forEach((e=>{const t=this.lf.getEdgeModelById(e.id),s=t.getData();if(s.pointsList=this.calcPointsList(t,o.nodes),s.pointsList){const e=s.pointsList[0],t=s.pointsList[s.pointsList.length-1];s.startPoint={x:e.x,y:e.y},s.endPoint={x:t.x,y:t.y},s.text&&s.text.value&&(s.text={x:t.x-6*this.getBytesLength(s.text.value)-10,y:t.y,value:s.text.value})}else s.startPoint=void 0,s.endPoint=void 0,s.text&&s.text.value&&(s.text=s.text.value);n.push(s)})),o.edges=n,this.lf.render(o)}isOverlap(e,t){return!(t.maxY<e.minY||e.maxY<t.minY||e.minX>t.maxX||t.minX>e.maxX)}getLayoutData(e,t={}){let s=40,o=40;this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:o,...this.option,...t,begin:[e.startNode.x,e.startNode.y]};const a=new Po.mC(this.option),{nodes:i}=e,n={};i.forEach((e=>{n[e.id]=e}));const r=e.edges.filter((e=>!n[e.targetNodeId])),l=e.edges.filter((e=>n[e.targetNodeId])),d=a.layout({nodes:i.map((e=>({id:e.id,size:{width:e.width,height:e.height},model:e}))),edges:l.map((e=>({source:e.sourceNodeId,target:e.targetNodeId,model:e})))}),c=r.map((e=>({source:e.sourceNodeId,target:e.targetNodeId,model:e})));return d.edges.push(...c),d}getPaths(){const{nodes:e,edges:t,gridSize:s}=this.lf.graphModel,o=e.filter((e=>"event-node"===e.type));o.sort(((e,t)=>e.y-t.y));const a=[];return o.forEach((e=>{const t=this.getPath(e),s=t.nodes;t.startNode=e,t.start=[e.x,e.y];const o=this.getNodesRect(s);t.rect=o,a.push(t)})),this.paths=a,a}getPath(e){const t=[],s=[];t.push(e);const o=e=>{const a=this.lf.getNodeOutgoingNode(e.id),i=this.lf.getNodeOutgoingEdge(e.id);a.length&&(a.forEach((e=>{this.nodeMap[e.id]||(t.push(e),this.nodeMap[e.id]=e,o(e))})),i.forEach((e=>{this.edgeMap[e.id]||(s.push(e),this.edgeMap[e.id]=e)})))};return o(e),t.forEach((t=>{t.id===this.targetNode.id&&(this.targetStartNode=e)})),{nodes:t,edges:s}}getNodesRect(e){const t=e.reduce(((e,t)=>Math.max(e,t.x)),-1/0),s=e.reduce(((e,t)=>Math.max(e,t.y)),-1/0),o=e.reduce(((e,t)=>Math.min(e,t.x)),1/0),a=e.reduce(((e,t)=>Math.min(e,t.y)),1/0);return{minX:o,minY:a,maxX:t,maxY:s}}pointFilter(e){const t=e;let s=1;while(s<t.length-1){const e=t[s-1],o=t[s],a=t[s+1];e.x===o.x&&o.x===a.x||e.y===o.y&&o.y===a.y?t.splice(s,1):s++}return t}calcPointsList(e,t){const s=[],o=e.offset||50;if("LR"===this.option.rankdir&&"polyline-edge"===e.modelType){const a=this.lf.getNodeModelById(e.sourceNodeId),i=this.lf.getNodeModelById(e.targetNodeId),n=t.find((t=>t.id===e.sourceNodeId)),r=t.find((t=>t.id===e.targetNodeId));if(n.x<r.x)return n.y>r.y?(s.push({x:n.x+a.width/2,y:n.y}),s.push({x:r.x-i.width/2-o,y:n.y}),s.push({x:r.x-i.width/2-o,y:r.y}),s.push({x:r.x-i.width/2,y:r.y})):(s.push({x:n.x+a.width/2,y:n.y}),s.push({x:n.x+a.width/2+o,y:n.y}),s.push({x:n.x+a.width/2+o,y:r.y}),s.push({x:r.x-i.width/2,y:r.y})),this.pointFilter(s);if(n.x>r.x)return n.y>=r.y?(s.push({x:n.x+a.width/2,y:n.y}),s.push({x:n.x+a.width/2+o,y:n.y}),s.push({x:n.x+a.width/2+o,y:r.y+o}),s.push({x:r.x-i.width/2-o,y:r.y+o}),s.push({x:r.x-i.width/2-o,y:r.y}),s.push({x:r.x-i.width/2,y:r.y})):(s.push({x:n.x,y:n.y-a.height/2}),s.push({x:n.x,y:n.y-a.height/2-o}),s.push({x:r.x,y:n.y-a.height/2-o}),s.push({x:r.x,y:r.y-i.height/2})),this.pointFilter(s)}}}var Io=Mo;class Oo{constructor(e){this.lf=e.lf,this.context=e.context,this.layout=new Io(this.lf,{rankdir:"LR",align:"UL",nodesep:2,ranksep:20}),this.selectedNodes=[],this.hoveredNodes=[],this.addHistory()}selectNodesByModel(e){const t=e.id,s=this.lf.getGraphData(),{nodes:o}=s;this.selectedNodes&&this.selectedNodes.forEach((e=>{e.setProperties({status:"normal"})})),this.selectedNodes=[],o.forEach((e=>{if(e.properties&&e.properties.componentId===t){const t=e.id,s=this.lf.getNodeModelById(t);s.setProperties({status:"selected"}),this.selectedNodes.push(s)}}))}hoverNodesByModel(e){const t=e.id,s=this.lf.getGraphData(),{nodes:o}=s;o.forEach((e=>{const s=e.id,o=this.lf.getNodeModelById(s);if(e.properties&&e.properties.componentId===t)o.setProperties({status:"hovered"});else{if(o.properties&&"selected"===o.properties.status)return;o.setProperties({status:"normal"})}}))}selectNode(e){const t=e.id,s=this.lf.getNodeModelById(t);this.selectedNodes&&this.selectedNodes.forEach((e=>{e.setProperties({status:"normal"})})),this.selectedNodes=[],s.setProperties({status:"selected"}),this.selectedNodes.push(s),this.lf.graphModel.eventCenter.emit("node:model-selected",e)}hoverNode(e){const t=e.id,s=this.lf.getNodeModelById(t);this.hoveredNodes&&this.hoveredNodes.forEach((e=>{e.setProperties({status:"normal"})})),this.hoveredNodes=[],s.setProperties({status:"hovered"}),this.hoveredNodes.push(s),this.lf.graphModel.eventCenter.emit("node:model-selected",e)}clearNodesStatus(){this.selectedNodes&&this.selectedNodes.forEach((e=>{e.setProperties({status:"normal"})})),this.hoveredNodes&&this.hoveredNodes.forEach((e=>{e.setProperties({status:"normal"})})),this.selectedNodes=[],this.hoveredNodes=[]}addNodeByDrop(e,t){const{clientX:s,clientY:o}=t,a=this.lf.graphModel.getPointByClient({x:s-5,y:o-5}),i=a.canvasOverlayPosition,n=ko(10),r=e.componentName,l=this.context.getMaterialByType(r),d=l.logo||We,c=Math.abs(i.x+te/2-Q)<50?Q:i.x+te/2,p=i.y+se/2,h={id:n,type:fo.type,x:c,y:p,properties:{name:ie(e),componentId:e.id,componentName:e.componentName,logo:d,item:{prop:!1}}},u=this.lf.addNode(h);this.selectNode(u),this.addHistory()}insertNode(e,t,s){const o=this.lf;if(e.data.type===Fs.type){const a=e,i=ko(10),n=o.addNode({id:i,type:t,x:a.endPoint.x+te/2,y:a.endPoint.y,properties:s}),r=a.data.targetNodeId,l={...a.data,targetNodeId:i,type:Fs.type},d={id:ko(10),sourceNodeId:i,targetNodeId:r,type:Fs.type};o.deleteEdge(a.id),o.addEdge(l),o.addEdge(d),this.layout.layout(n),this.selectNode(n)}else{const a=ko(10),i=_o(o,e),n=o.addNode({id:a,type:t,x:i.x,y:i.y,properties:s});o.addEdge({id:ko(10),sourceNodeId:e.id,targetNodeId:a,type:Fs.type}),this.layout.layout(n),this.selectNode(n)}this.addHistory()}deleteNode(e){const t=this.lf.getNodeIncomingEdge(e.id),s=this.lf.getNodeOutgoingNode(e.id),o=this.lf.getNodeIncomingNode(e.id);if(s.length&&t.length){const e=t[0],o=s[0];let a={...e.data,targetNodeId:o.id};this.lf.deleteEdge(e),this.addEdge(a)}this.lf.deleteNode(e.id),o.length?this.layout.layout(o[0]):o.length&&this.layout.layout(s[0]),this.addHistory()}copyNode(e){const{data:t}=e;let s=0,o=0;if(e.type===fo.type){let e=Co(this.lf);s=e.x,o=e.y}else s=t.x,o=t.y+W;const a={...t,id:ko(10),x:s,y:o},i=this.lf.addNode(a);this.selectNode(i),this.addHistory()}addEdge(e){this.lf.addEdge(this.calcPointsList(e))}connectToNode(e,t){this.lf.graphModel.getNodeModelById(e);this.lf.addEdge({id:ko(10),sourceNodeId:t.id,targetNodeId:e,type:Fs.type}),this.layout.layout(t),this.addHistory()}calcPointsList(e){const t=this.lf;if(!e.pointsList||0===e.pointsList.length){const s=t.getNodeModelById(e.sourceNodeId),o=t.getNodeModelById(e.targetNodeId);s.x>o.x&&(e.pointsList=[{x:o.x+75,y:o.y},{x:o.x+75,y:o.y-150},{x:s.x-75,y:s.y},{x:s.x-75,y:s.y-150}])}return e}shiftNextNodes(e,t){const s=this.lf;e.x=e.x+t;const o=s.getNodeOutgoingNode(e.id),a=s.getNodeOutgoingEdge(e.id);o.length&&o.forEach((e=>{this.shiftNextNodes(e,t)})),a.length&&a.forEach((e=>{const{data:t}=e,o=t;s.deleteEdge(e.id),this.addEdge(o)}))}isLoopNode(e,t){const s=this.lf.getNodeOutgoingNode(e.id);if(s.length)for(let o=0;o<s.length;o++){const e=s[o];return e.id===t||this.isLoopNode(e,t)}return!1}addInitNode(){const{x:e,y:t}=Co(this.lf),s=this.lf.addNode({id:ko(10,"init_"),type:fo.type,x:e,y:t,properties:{componentId:"page_init",componentName:"pageInit",name:"页面初始化",logo:Ye.pageInit.logo}});return this.selectNode(s),s}initView(){const{nodes:e}=this.lf.getGraphData(),t=this.layout.getNodesRect(e);this.lf.graphModel.transformModel.translate(-t.minX+Q,-t.minY+ee)}addHistory(){this.lf.getGraphData()}undo(){}redo(){}}var To=Oo,Eo=s(1201);class So{constructor({lf:e}){e.graphModel.popover=this,this.popoverTypeMap=new Map,this.floatingMap=new Map,this.waitingCollection=new Map,this.renderedCollection=new Map,this.removeFloatingHandler=this.removeFloating.bind(this)}registerPopover(e,t){this.popoverTypeMap.set(e,t)}render(e,t){this.lf=e,this.lfContainer=t,this.container=document.querySelector("body")}createFloating(e,t,s){const o=document.createElement("div");o.className=`lf-popover-floating ${s.placement}`,o.style.left=e+"px",o.style.top=t+"px";const a=document.createElement("div");o.appendChild(a);const i=document.createElement("div");return i.className=`lf-popover-arrow ${s.placement}`,o.appendChild(i),this.container.appendChild(o),"click"===s.trigger?(document.body.addEventListener("mousedown",this.removeFloatingHandler),o.addEventListener("mousedown",(e=>{e.stopPropagation()}))):(o.addEventListener("mouseenter",(()=>{this.renderedCollection.set(s.__id+"__popover",s)})),o.addEventListener("mouseleave",(()=>{this.renderedCollection.delete(s.__id+"__popover"),this.destroyPopover(s.__id)}))),this.floatingMap.set(s.__id,o),a}removeFloating(){document.body.removeEventListener("mousedown",this.removeFloatingHandler),this.renderedCollection.forEach((e=>{"click"===e.trigger&&this.destroyPopover(e.__id)}))}renderPopover(e){const t=this.getShowPosition(e),[s,o]=this.lf.graphModel.transformModel.CanvasPointToHtmlPoint(t),a=this.lfContainer.getBoundingClientRect(),i=a.x,n=a.y,r=i+s,l=n+o,d=this.createFloating(r,l,e),c=this.popoverTypeMap.get(e.type);if(!c)throw new Error("未找到需要弹框的内容");c.render?c.render(d,e):c.element&&d.appendChild(element);const p=this.floatingMap.get(e.__id),h=p.getBoundingClientRect();if(h.top<0){p.className="lf-popover-floating bottom";const e=p.querySelector(".lf-popover-arrow");e&&(e.className="lf-popover-arrow bottom")}this.renderedCollection.set(e.__id,e)}destroyPopover(e){if(this.renderedCollection.delete(e),!this.renderedCollection.has(e+"__popover")){const t=this.floatingMap.get(e);t&&this.container.removeChild(t),this.renderedCollection.delete(e+"__popover"),this.floatingMap.delete(e)}}show(e){this.config=e;const t=(0,Eo.A)(e),s=xo();return"click"===e.trigger&&e.key?t.__id=e.key:t.__id=s,this.waitingCollection.set(t.__id,t),setTimeout((()=>{if(this.renderedCollection.has(t.__id))this.removeFloating();else{const e=this.waitingCollection.get(t.__id);this.waitingCollection.delete(t.__id),e&&this.renderPopover(e)}}),e.delay||0),t.__id}getShowPosition(e){switch(e.placement){case"right":return[e.x+e.width/2+5,e.y];case"bottom":return[e.x,e.y+e.height/2+5];case"top":return[e.x,e.y-e.height/2-5];case"left":return[e.x-e.width/2+5,e.y];default:return[e.x+e.width/2+5,e.y]}}hide(e){this.waitingCollection.delete(e),setTimeout((()=>{this.destroyPopover(e)}),50)}}So.pluginName="popover";var Lo={name:"LogicPanel",props:{context:Object,info:Object},data(){return{lf:null,graph:null,isShowMenu:!1,menuPosition:{x:0,y:0},currentModel:null,tipText:"",loading:!0}},async mounted(){this.loading=!0,await bo(100),this.initCanvas(),this.initEvents(),this.initPopover(),this.info&&this.createDefaultLogic(),this.loading=!1},methods:{onDrop(e){const t=this.context.Dnd.getDragObject();this.graph.addNodeByDrop(t,e)},onDragOver(e){e.preventDefault()},initCanvas(){const e=this.getGraphDataFromContext();this.lf=new(v())({container:this.$refs.container,autoExpand:!1,hoverOutline:!1,edgeSelectedOutline:!1,plugins:[f.of,f.LR,f.W1,y.c,So],keyboard:{enabled:!0,shortcuts:[{keys:"backspace",callback:()=>{const{edges:e}=this.lf.getSelectElements();e&&1===e.length&&this.lf.deleteEdge(e[0].id)}}]},grid:{size:10,visible:!1}}),this.lf.batchRegister([Fs,ho,go,fo]),this.lf.render(e),this.lf.setDefaultEdgeType(Fs.type),this.lf.setTheme({arrow:{offset:4,verticalLength:3},snapline:{stroke:"#2961EF",strokeWidth:1},bezier:{stroke:"#afafaf",strokeWidth:2}}),this.graph=new To({lf:this.lf,context:this.context}),e&&0!==e.nodes.length||(this.initNode=this.graph.addInitNode()),this.graph.initView(),window.lf=this.lf},initEvents(){this.context.eventCenter.on(ae.CANVAS_MODEL_CLICKED,(e=>{this.graph.selectNodesByModel(e)})),this.context.eventCenter.on(ae.CANVAS_MODEL_DELETED,(e=>{console.log("EDITOR_EVENT.CANVAS_MODEL_DELETE",e)})),this.lf.on("node:select-click",(e=>{this.graph.selectNode(e),this.currentModel=e})),this.lf.on("node:hover-node",(e=>{this.graph.hoverNode(e)})),this.lf.on("node:mouseleave",(()=>{this.context.eventCenter.emit(ae.LOGIC_NODE_HOVER,null)})),this.lf.on("node:click",(({data:e})=>{const t=this.lf.getNodeModelById(e.id);this.currentModel=t})),this.lf.on("history:change",(()=>{this.setGraphDataToContext()})),this.lf.on("node:add-node",(({model:e,type:t,properties:s})=>{this.graph.insertNode(e,t,s)})),this.lf.on("node:delete-node",(e=>{this.graph.deleteNode(e);const t=e.getData();"common-node"===t.type&&t.properties&&t.properties.ds&&this.checkRelatedNode()})),this.lf.on("node:copy-node",(e=>{this.graph.copyNode(e)})),this.lf.on("node:delete",(({data:e})=>{const{nodes:t}=this.lf.getGraphData();if(0===t.length)this.initNode=this.graph.addInitNode();else if(e.properties&&"pageInit"===e.properties.componentName){const e=t.find((e=>e.properties&&"pageInit"===e.properties.componentName));e||(this.initNode=this.graph.addInitNode())}})),this.lf.on("node:add-click",(({model:e,event:t})=>{this.currentModel=e;const s=t.clientX,o=t.clientY;this.menuPosition={x:s-10,y:o-10},this.isShowMenu=!0})),this.lf.on("edge:update-model",(e=>{this.currentModel=e})),this.lf.on("node:update-model",(e=>{this.currentModel=e,this.graph.selectNode(e)})),this.lf.on("blank:click",(()=>{this.currentModel=null,this.graph.clearNodesStatus(),this.context.eventCenter.emit(ae.CANVAS_MODEL_ACTIVATED,null)})),this.lf.on("blank:contextmenu",(({e:e,position:t})=>{const s=e.clientX,o=e.clientY;this.menuPosition={x:s-10,y:o-10},this.isShowMenu=!0}))},initPopover(){const{popover:e}=this.lf.extension;e.registerPopover("tip1",{render:(e,t)=>{const s=new Vue({render:e=>e(ks,{props:{lf:this.lf,context:this.context,graph:this.graph,model:this.currentModel,showConnectBlock:t.props.showConnectBlock}})});s.$mount(e)}})},getGraphDataFromContext(){const{logicList:e}=this.context;if(1===e.length&&void 0!==e[0].nodes){const t=e[0];return t.nodes.forEach((e=>{const{properties:t}=e;t&&(e.properties.logo=We)})),t}return{nodes:[],edges:[]}},setGraphDataToContext(){const e=this.lf.getGraphData();e.nodes.forEach((e=>{e.properties&&(delete e.properties.logo,delete e.properties.status,delete e.properties.warnings)})),this.context.logicList=[e]},getNodeOutgoing(e){const t=this.lf.getNodeOutgoingEdge(e);return t.map((e=>{const t=e.getData();return{id:t.id,condition:t.properties.condition,text:t.text?t.text.value:"",target:t.targetNodeId,pointsList:t.pointsList}}))},handleSubmit(e){"ds"===e&&this.checkRelatedDs(),this.graph.addHistory()},createDefaultNode(e){const{dynamicKey:t,model:s}=this.info,o=s.getLogic(),a=o.props||[],i=a.find((e=>e.name===t))||{},n={id:ko(10),type:ho.type,x:e.x+2*X,y:e.y,properties:{componentId:s.id,componentName:s.componentName,name:ie(s),reactions:[{key:t,keyDefine:i.description,valueDefine:"",value:{type:"dataSource"}}],item:{prop:!0}}};return n},createDefaultLogic(){const e=Co(this.lf),t={id:ko(10),type:fo.type,x:e.x,y:e.y,properties:{componentId:"page_init",componentName:"pageInit",name:"页面初始化"}},s={id:ko(10),type:go.type,x:e.x+X,y:e.y,properties:{type:"dataSource",componentName:"dataSource",name:"数据请求"}},o=this.createDefaultNode(e),a={nodes:[t,s,o],edges:[{id:ko(10),type:Fs.type,sourceNodeId:t.id,targetNodeId:s.id},{id:ko(10),type:Fs.type,sourceNodeId:s.id,targetNodeId:o.id}]};this.lf.addElements(a),this.lf.translate(0,-W)}},components:{propertyPanel:bs,toolbar:Es}},Do=Lo,jo=(0,$.A)(Do,u,m,!1,null,"20d76898",null),Ao=jo.exports,zo={name:"LogicSetter",data(){return{context:new h({logicList:[]}),info:void 0}},components:{LogicPanel:Ao}},$o=zo,Vo=(0,$.A)($o,r,l,!1,null,null,null),Ro=Vo.exports;o["default"].use(a.Ay),o["default"].use(n()),window.Vue=o["default"];const qo=new o["default"]({render:e=>e(Ro)});qo.$mount("#app")},6973:function(){}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,o,a,i){if(!o){var n=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var r=!0,l=0;l<o.length;l++)(!1&i||n>=i)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(r=!1,i<n&&(n=i));if(r){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,n=o[0],r=o[1],l=o[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var c=l(s)}for(t&&t(o);d<n.length;d++)i=n[d],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},o=self["webpackChunkorganizer"]=self["webpackChunkorganizer"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(4061)}));o=s.O(o)})();
//# sourceMappingURL=app.6b471581.js.map